<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/GitHubProjects/you-get/tests/test.py" timestamp="1486938522146">
        <mark key="'" line="20" column="8" />
      </file>
      <file name="/Python Console" timestamp="1487419413686">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="^" line="0" column="0" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="/fragment.py" timestamp="1487415105986">
        <mark key="[" line="0" column="0" />
        <mark key="." line="0" column="17" />
      </file>
      <file name="$APPLICATION_HOME_DIR$/helpers/pydev/_pydev_imps/_pydev_execfile.py" timestamp="1487405339639">
        <mark key="'" line="17" column="0" />
      </file>
      <file name="/usr/lib/python3.6/site-packages/you_get/json_output.py" timestamp="1487404917962">
        <mark key="'" line="6" column="15" />
        <mark key="[" line="6" column="0" />
        <mark key="]" line="16" column="30" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/contrib/completion/you-get-completion.bash" timestamp="1486938596337">
        <mark key="'" line="23" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/echo_ckeyv3.py" timestamp="1487128058227">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="62" column="16" />
        <mark key="." line="4" column="0" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractors/youku.py" timestamp="1487416691798">
        <mark key="'" line="336" column="17" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/pinterest.py" timestamp="1486948804486">
        <mark key="'" line="39" column="48" />
      </file>
      <file name="/usr/lib/python3.6/site-packages/you_get/extractors/qq.py" timestamp="1487407243053">
        <mark key="'" line="23" column="12" />
      </file>
      <file name="/usr/lib/python3.6/site-packages/you_get/extractor.py" timestamp="1487404911266">
        <mark key="'" line="162" column="12" />
        <mark key="[" line="160" column="0" />
        <mark key="]" line="218" column="30" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" timestamp="1487419410752">
        <mark key="'" line="84" column="20" />
        <mark key="[" line="84" column="43" />
        <mark key="]" line="85" column="12" />
        <mark key="." line="85" column="12" />
        <mark key="^" line="85" column="12" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" timestamp="1487415510736">
        <mark key="'" line="206" column="16" />
        <mark key="[" line="207" column="57" />
        <mark key="]" line="196" column="109" />
        <mark key="^" line="201" column="109" />
        <mark key="." line="207" column="57" />
      </file>
      <file name="/Dummy.txt" timestamp="1487413686691">
        <mark key="[" line="0" column="0" />
        <mark key="." line="0" column="52" />
      </file>
      <file name="/usr/lib/python3.6/shlex.py" timestamp="1486934419231">
        <mark key="'" line="58" column="8" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youtube.py" timestamp="1487120877187">
        <mark key="'" line="12" column="4" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/json_output.py" timestamp="1487419006683">
        <mark key="'" line="36" column="9" />
        <mark key="[" line="12" column="0" />
        <mark key="]" line="13" column="71" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractors/qq.py" timestamp="1487407383829">
        <mark key="'" line="235" column="0" />
      </file>
      <file name="/usr/lib/python3.6/site-packages/you_get/extractors/youku.py" timestamp="1487403424485">
        <mark key="'" line="393" column="17" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" timestamp="1487414109677">
        <mark key="'" line="11" column="12" />
        <mark key="[" line="4" column="0" />
        <mark key="]" line="4" column="0" />
        <mark key="." line="4" column="0" />
        <mark key="^" line="4" column="13" />
      </file>
      <file name="/usr/lib/python3.6/site-packages/you_get/common.py" timestamp="1487401325355">
        <mark key="'" line="1131" column="0" />
        <mark key="[" line="1125" column="0" />
        <mark key="]" line="1135" column="35" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" timestamp="1487416612325">
        <mark key="'" line="133" column="18" />
        <mark key="[" line="206" column="0" />
        <mark key="]" line="209" column="78" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" timestamp="1487418888054">
        <mark key="'" line="1277" column="16" />
        <mark key="[" line="448" column="0" />
        <mark key="]" line="448" column="0" />
        <mark key="." line="448" column="0" />
      </file>
      <file name="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractors/youtube.py" timestamp="1487419437592">
        <mark key="'" line="139" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/README.md" timestamp="1486941586042">
        <mark key="'" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/json_output.py" timestamp="1487413694680">
        <mark key="'" line="35" column="4" />
        <mark key="[" line="13" column="0" />
        <mark key="]" line="13" column="26" />
        <mark key="^" line="13" column="26" />
        <mark key="." line="14" column="12" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/tests/test_util.py" timestamp="1486938503562">
        <mark key="'" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/imgur.py" timestamp="1486945878329">
        <mark key="'" line="19" column="6" />
      </file>
    </filemarks>
    <jumps>
      <jump line="175" column="20" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="201" column="67" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="209" column="61" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="332" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="265" column="8" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="151" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="153" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="156" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="160" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="167" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="171" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="206" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="211" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="214" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="217" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="283" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="275" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="270" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="223" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="240" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="264" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="247" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="11" column="12" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractors/youku.py" />
      <jump line="160" column="12" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="225" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="224" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="221" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="202" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="191" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="186" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="178" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="159" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="154" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="148" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="134" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="128" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="120" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="115" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="109" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="107" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="102" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="96" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="99" column="0" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="9" column="8" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="206" column="16" filename="$USER_HOME$/GitHubProjects/you-get/src/you_get/extractor.py" />
      <jump line="180" column="27" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="186" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="191" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="202" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="221" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="833" column="8" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="509" column="4" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="206" column="24" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="795" column="8" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="802" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="806" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="814" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="819" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="828" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="847" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="807" column="21" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="793" column="88" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="809" column="62" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="423" column="4" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="51" column="54" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="133" column="18" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractor.py" />
      <jump line="336" column="17" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractors/youku.py" />
      <jump line="47" column="15" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="82" column="16" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="76" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="1" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="10" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="24" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="33" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="38" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="65" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="68" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="78" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="86" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="89" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="87" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="1193" column="4" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="1199" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="1203" column="12" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="445" column="8" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="3" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="448" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="272" column="12" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="295" column="12" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="303" column="12" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="117" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="97" column="7" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="114" column="14" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="172" column="8" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="84" column="20" filename="$USER_HOME$/PycharmProjects/video-simple-backend/video-simple-backend.py" />
      <jump line="1" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="1277" column="16" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/common.py" />
      <jump line="45" column="5" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/json_output.py" />
      <jump line="36" column="9" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/json_output.py" />
      <jump line="139" column="0" filename="$USER_HOME$/PycharmProjects/video-simple-backend/you_get/extractors/youtube.py" />
    </jumps>
    <registers>
      <register name="&quot;" type="4">
        <text>s_url</text>
      </register>
      <register name="-" type="4">
        <text>s_url</text>
      </register>
      <register name="/" type="4">
        <text>help</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICAndmlkZW9fcHJvZmlsZSc6IHNlbGYuc3RyZWFtc1tzdHJlYW1faWRdWyd2aWRlb19wcm9maWxlJ10sCg==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgIGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzCgogICAgdHlwZSA9IGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddCiAgICBpZiB0eXBlID09ICdpbWFnZS9qcGc7IGNoYXJzZXQ9VVRGLTgnIG9yIHR5cGUgPT0gJ2ltYWdlL2pwZyc6IHR5cGUgPSAnYXVkaW8vbXBlZycgICMgZml4IGZvciBuZXRlYXNlCiAgICBtYXBwaW5nID0gewogICAgICAgICd2aWRlby8zZ3BwJzogJzNncCcsCiAgICAgICAgJ3ZpZGVvL2Y0dic6ICdmbHYnLAogICAgICAgICd2aWRlby9tcDQnOiAnbXA0JywKICAgICAgICAndmlkZW8vTVAyVCc6ICd0cycsCiAgICAgICAgJ3ZpZGVvL3F1aWNrdGltZSc6ICdtb3YnLAogICAgICAgICd2aWRlby93ZWJtJzogJ3dlYm0nLAogICAgICAgICd2aWRlby94LWZsdic6ICdmbHYnLAogICAgICAgICd2aWRlby94LW1zLWFzZic6ICdhc2YnLAogICAgICAgICdhdWRpby9tcDQnOiAnbXA0JywKICAgICAgICAnYXVkaW8vbXBlZyc6ICdtcDMnLAogICAgICAgICdpbWFnZS9qcGVnJzogJ2pwZycsCiAgICAgICAgJ2ltYWdlL3BuZyc6ICdwbmcnLAogICAgICAgICdpbWFnZS9naWYnOiAnZ2lmJywKICAgICAgICAnYXBwbGljYXRpb24vcGRmJzogJ3BkZicsCiAgICB9CiAgICBpZiB0eXBlIGluIG1hcHBpbmc6CiAgICAgICAgZXh0ID0gbWFwcGluZ1t0eXBlXQogICAgZWxzZToKICAgICAgICB0eXBlID0gTm9uZQogICAgICAgIGlmIGhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBwYXJzZS51bnF1b3RlKHIxKHInZmlsZW5hbWU9Ij8oW14iXSspIj8nLCBoZWFkZXJzWydjb250ZW50LWRpc3Bvc2l0aW9uJ10pKQogICAgICAgICAgICAgICAgaWYgbGVuKGZpbGVuYW1lLnNwbGl0KCcuJykpID4gMToKICAgICAgICAgICAgICAgICAgICBleHQgPSBmaWxlbmFtZS5zcGxpdCgnLicpWy0xXQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBleHQgPSBOb25lCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGV4dCA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBleHQgPSBOb25lCgogICAgaWYgaGVhZGVyc1sndHJhbnNmZXItZW5jb2RpbmcnXSAhPSAnY2h1bmtlZCc6CiAgICAgICAgc2l6ZSA9IGhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10gYW5kIGludChoZWFkZXJzWydjb250ZW50LWxlbmd0aCddKQogICAgZWxzZToKICAgICAgICBzaXplID0gTm9uZQoKICAgIHJldHVybiB0eXBlLCBleHQsIHNpemUKCgpkZWYgdXJsX2xvY2F0aW9ucyh1cmxzLCBmYWtlcj1GYWxzZSwgaGVhZGVycz17fSk6CiAgICBsb2NhdGlvbnMgPSBbXQogICAgZm9yIHVybCBpbiB1cmxzOgogICAgICAgIGxvZ2dpbmcuZGVidWcoJ3VybF9sb2NhdGlvbnM6ICVzJyAlIHVybCkKCiAgICAgICAgaWYgZmFrZXI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gdXJsb3Blbl93aXRoX3JldHJ5KHJlcXVlc3QuUmVxdWVzdCh1cmwsIGhlYWRlcnM9ZmFrZV9oZWFkZXJzKSkKICAgICAgICBlbGlmIGhlYWRlcnM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gdXJsb3Blbl93aXRoX3JldHJ5KHJlcXVlc3QuUmVxdWVzdCh1cmwsIGhlYWRlcnM9aGVhZGVycykpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzcG9uc2UgPSB1cmxvcGVuX3dpdGhfcmV0cnkocmVxdWVzdC5SZXF1ZXN0KHVybCkpCgogICAgICAgIGxvY2F0aW9ucy5hcHBlbmQocmVzcG9uc2UudXJsKQogICAgcmV0dXJuIGxvY2F0aW9ucwoKCmRlZiB1cmxfc2F2ZSh1cmwsIGZpbGVwYXRoLCBiYXIsIHJlZmVyPU5vbmUsIGlzX3BhcnQ9RmFsc2UsIGZha2VyPUZhbHNlLCBoZWFkZXJzPXt9KToKICAgIGZpbGVfc2l6ZSA9IHVybF9zaXplKHVybCwgZmFrZXI9ZmFrZXIsIGhlYWRlcnM9aGVhZGVycykKCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlcGF0aCk6CiAgICAgICAgaWYgbm90IGZvcmNlIGFuZCBmaWxlX3NpemUgPT0gb3MucGF0aC5nZXRzaXplKGZpbGVwYXRoKToKICAgICAgICAgICAgaWYgbm90IGlzX3BhcnQ6CiAgICAgICAgICAgICAgICBpZiBiYXI6CiAgICAgICAgICAgICAgICAgICAgYmFyLmRvbmUoKQogICAgICAgICAgICAgICAgcHJpbnQoJ1NraXBwaW5nICVzOiBmaWxlIGFscmVhZHkgZXhpc3RzJyAlIHRyKG9zLnBhdGguYmFzZW5hbWUoZmlsZXBhdGgpKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGJhcjoKICAgICAgICAgICAgICAgICAgICBiYXIudXBkYXRlX3JlY2VpdmVkKGZpbGVfc2l6ZSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90IGlzX3BhcnQ6CiAgICAgICAgICAgICAgICBpZiBiYXI6CiAgICAgICAgICAgICAgICAgICAgYmFyLmRvbmUoKQogICAgICAgICAgICAgICAgcHJpbnQoJ092ZXJ3cml0aW5nICVzJyAlIHRyKG9zLnBhdGguYmFzZW5hbWUoZmlsZXBhdGgpKSwgJy4uLicpCiAgICBlbGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhvcy5wYXRoLmRpcm5hbWUoZmlsZXBhdGgpKToKICAgICAgICBvcy5ta2Rpcihvcy5wYXRoLmRpcm5hbWUoZmlsZXBhdGgpKQoKICAgIHRlbXBfZmlsZXBhdGggPSBmaWxlcGF0aCArICcuZG93bmxvYWQnIGlmIGZpbGVfc2l6ZSAhPSBmbG9hdCgnaW5mJykgZWxzZSBmaWxlcGF0aAogICAgcmVjZWl2ZWQgPSAwCiAgICBpZiBub3QgZm9yY2U6CiAgICAgICAgb3Blbl9tb2RlID0gJ2FiJwoKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyh0ZW1wX2ZpbGVwYXRoKToKICAgICAgICAgICAgcmVjZWl2ZWQgKz0gb3MucGF0aC5nZXRzaXplKHRlbXBfZmlsZXBhdGgpCiAgICAgICAgICAgIGlmIGJhcjoKICAgICAgICAgICAgICAgIGJhci51cGRhdGVfcmVjZWl2ZWQob3MucGF0aC5nZXRzaXplKHRlbXBfZmlsZXBhdGgpKQogICAgZWxzZToKICAgICAgICBvcGVuX21vZGUgPSAnd2InCgogICAgaWYgcmVjZWl2ZWQgPCBmaWxlX3NpemU6CiAgICAgICAgaWYgZmFrZXI6CiAgICAgICAgICAgIGhlYWRlcnMgPSBmYWtlX2hlYWRlcnMKICAgICAgICBlbGlmIGhlYWRlcnM6CiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGVhZGVycyA9IHt9CiAgICAgICAgaWYgcmVjZWl2ZWQ6CiAgICAgICAgICAgIGhlYWRlcnNbJ1JhbmdlJ10gPSAnYnl0ZXM9JyArIHN0cihyZWNlaXZlZCkgKyAnLScKICAgICAgICBpZiByZWZlcjoKICAgICAgICAgICAgaGVhZGVyc1snUmVmZXJlciddID0gcmVmZXIKCiAgICAgICAgcmVzcG9uc2UgPSB1cmxvcGVuX3dpdGhfcmV0cnkocmVxdWVzdC5SZXF1ZXN0KHVybCwgaGVhZGVycz1oZWFkZXJzKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJhbmdlX3N0YXJ0ID0gaW50KHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtcmFuZ2UnXVs2Ol0uc3BsaXQoJy8nKVswXS5zcGxpdCgnLScpWzBdKQogICAgICAgICAgICBlbmRfbGVuZ3RoID0gaW50KHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtcmFuZ2UnXVs2Ol0uc3BsaXQoJy8nKVsxXSkKICAgICAgICAgICAgcmFuZ2VfbGVuZ3RoID0gZW5kX2xlbmd0aCAtIHJhbmdlX3N0YXJ0CiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBjb250ZW50X2xlbmd0aCA9IHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10KICAgICAgICAgICAgcmFuZ2VfbGVuZ3RoID0gaW50KGNvbnRlbnRfbGVuZ3RoKSBpZiBjb250ZW50X2xlbmd0aCAhPSBOb25lIGVsc2UgZmxvYXQoJ2luZicpCgogICAgICAgIGlmIGZpbGVfc2l6ZSAhPSByZWNlaXZlZCArIHJhbmdlX2xlbmd0aDoKICAgICAgICAgICAgcmVjZWl2ZWQgPSAwCiAgICAgICAgICAgIGlmIGJhcjoKICAgICAgICAgICAgICAgIGJhci5yZWNlaXZlZCA9IDAKICAgICAgICAgICAgb3Blbl9tb2RlID0gJ3diJwoKICAgICAgICB3aXRoIG9wZW4odGVtcF9maWxlcGF0aCwgb3Blbl9tb2RlKSBhcyBvdXRwdXQ6CiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBidWZmZXIgPSByZXNwb25zZS5yZWFkKDEwMjQgKiAyNTYpCiAgICAgICAgICAgICAgICBpZiBub3QgYnVmZmVyOgogICAgICAgICAgICAgICAgICAgIGlmIHJlY2VpdmVkID09IGZpbGVfc2l6ZTogICMgRG93bmxvYWQgZmluaXNoZWQKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOiAgIyBVbmV4cGVjdGVkIHRlcm1pbmF0aW9uLiBSZXRyeSByZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1JhbmdlJ10gPSAnYnl0ZXM9JyArIHN0cihyZWNlaXZlZCkgKyAnLScKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB1cmxvcGVuX3dpdGhfcmV0cnkocmVxdWVzdC5SZXF1ZXN0KHVybCwgaGVhZGVycz1oZWFkZXJzKSkKICAgICAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIpCiAgICAgICAgICAgICAgICByZWNlaXZlZCArPSBsZW4oYnVmZmVyKQogICAgICAgICAgICAgICAgaWYgYmFyOgogICAgICAgICAgICAgICAgICAgIGJhci51cGRhdGVfcmVjZWl2ZWQobGVuKGJ1ZmZlcikpCgogICAgYXNzZXJ0IHJlY2VpdmVkID09IG9zLnBhdGguZ2V0c2l6ZSh0ZW1wX2ZpbGVwYXRoKSwgJyVzID09ICVzID09ICVzJyAlICgKICAgIHJlY2VpdmVkLCBvcy5wYXRoLmdldHNpemUodGVtcF9maWxlcGF0aCksIHRlbXBfZmlsZXBhdGgpCgogICAgaWYgb3MuYWNjZXNzKGZpbGVwYXRoLCBvcy5XX09LKToKICAgICAgICBvcy5yZW1vdmUoZmlsZXBhdGgpICAjIG9uIFdpbmRvd3MgcmVuYW1lIGNvdWxkIGZhaWwgaWYgZGVzdGluYXRpb24gZmlsZXBhdGggZXhpc3RzCiAgICBvcy5yZW5hbWUodGVtcF9maWxlcGF0aCwgZmlsZXBhdGgpCgoKZGVmIHVybF9zYXZlX2NodW5rZWQodXJsLCBmaWxlcGF0aCwgYmFyLCBkeW5fY2FsbGJhY2s9Tm9uZSwgY2h1bmtfc2l6ZT0wLCBpZ25vcmVfcmFuZ2U9RmFsc2UsIHJlZmVyPU5vbmUsIGlzX3BhcnQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgIGZha2VyPUZhbHNlLCBoZWFkZXJzPXt9KToKICAgIGRlZiBkeW5fdXBkYXRlX3VybChyZWNlaXZlZCk6CiAgICAgICAgaWYgY2FsbGFibGUoZHluX2NhbGxiYWNrKToKICAgICAgICAgICAgbG9nZ2luZy5kZWJ1ZygnQ2FsbGluZyBjYWxsYmFjayAlcyBmb3IgbmV3IFVSTCBmcm9tICVzJyAlIChkeW5fY2FsbGJhY2suX19uYW1lX18sIHJlY2VpdmVkKSkKICAgICAgICAgICAgcmV0dXJuIGR5bl9jYWxsYmFjayhyZWNlaXZlZCkKCiAgICBpZiBvcy5wYXRoLmV4aXN0cyhmaWxlcGF0aCk6CiAgICAgICAgaWYgbm90IGZvcmNlOgogICAgICAgICAgICBpZiBub3QgaXNfcGFydDoKICAgICAgICAgICAgICAgIGlmIGJhcjoKICAgICAgICAgICAgICAgICAgICBiYXIuZG9uZSgpCiAgICAgICAgICAgICAgICBwcmludCgnU2tpcHBpbmcgJXM6IGZpbGUgYWxyZWFkeSBleGlzdHMnICUgdHIob3MucGF0aC5iYXNlbmFtZShmaWxlcGF0aCkpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgYmFyOgogICAgICAgICAgICAgICAgICAgIGJhci51cGRhdGVfcmVjZWl2ZWQob3MucGF0aC5nZXRzaXplKGZpbGVwYXRoKSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90IGlzX3BhcnQ6CiAgICAgICAgICAgICAgICBpZiBiYXI6CiAgICAgICAgICAgICAgICAgICAgYmFyLmRvbmUoKQogICAgICAgICAgICAgICAgcHJpbnQoJ092ZXJ3cml0aW5nICVzJyAlIHRyKG9zLnBhdGguYmFzZW5hbWUoZmlsZXBhdGgpKSwgJy4uLicpCiAgICBlbGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhvcy5wYXRoLmRpcm5hbWUoZmlsZXBhdGgpKToKICAgICAgICBvcy5ta2Rpcihvcy5wYXRoLmRpcm5hbWUoZmlsZXBhdGgpKQoKICAgIHRlbXBfZmlsZXBhdGggPSBmaWxlcGF0aCArICcuZG93bmxvYWQnCiAgICByZWNlaXZlZCA9IDAKICAgIGlmIG5vdCBmb3JjZToKICAgICAgICBvcGVuX21vZGUgPSAnYWInCgogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHRlbXBfZmlsZXBhdGgpOgogICAgICAgICAgICByZWNlaXZlZCArPSBvcy5wYXRoLmdldHNpemUodGVtcF9maWxlcGF0aCkKICAgICAgICAgICAgaWYgYmFyOgogICAgICAgICAgICAgICAgYmFyLnVwZGF0ZV9yZWNlaXZlZChvcy5wYXRoLmdldHNpemUodGVtcF9maWxlcGF0aCkpCiAgICBlbHNlOgogICAgICAgIG9wZW5fbW9kZSA9ICd3YicKCiAgICBpZiBmYWtlcjoKICAgICAgICBoZWFkZXJzID0gZmFrZV9oZWFkZXJzCiAgICBlbGlmIGhlYWRlcnM6CiAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMKICAgIGVsc2U6CiAgICAgICAgaGVhZGVycyA9IHt9CiAgICBpZiByZWNlaXZlZDoKICAgICAgICB1cmwgPSBkeW5fdXBkYXRlX3VybChyZWNlaXZlZCkKICAgICAgICBpZiBub3QgaWdub3JlX3JhbmdlOgogICAgICAgICAgICBoZWFkZXJzWydSYW5nZSddID0gJ2J5dGVzPScgKyBzdHIocmVjZWl2ZWQpICsgJy0nCiAgICBpZiByZWZlcjoKICAgICAgICBoZWFkZXJzWydSZWZlcmVyJ10gPSByZWZlcgoKICAgIHJlc3BvbnNlID0gdXJsb3Blbl93aXRoX3JldHJ5KHJlcXVlc3QuUmVxdWVzdCh1cmwsIGhlYWRlcnM9aGVhZGVycykpCgogICAgd2l0aCBvcGVuKHRlbXBfZmlsZXBhdGgsIG9wZW5fbW9kZSkgYXMgb3V0cHV0OgogICAgICAgIHRoaXNfY2h1bmsgPSByZWNlaXZlZAogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGJ1ZmZlciA9IHJlc3BvbnNlLnJlYWQoMTAyNCAqIDI1NikKICAgICAgICAgICAgaWYgbm90IGJ1ZmZlcjoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIG91dHB1dC53cml0ZShidWZmZXIpCiAgICAgICAgICAgIHJlY2VpdmVkICs9IGxlbihidWZmZXIpCiAgICAgICAgICAgIGlmIGNodW5rX3NpemUgYW5kIChyZWNlaXZlZCAtIHRoaXNfY2h1bmspID49IGNodW5rX3NpemU6CiAgICAgICAgICAgICAgICB1cmwgPSBkeW5fY2FsbGJhY2socmVjZWl2ZWQpCiAgICAgICAgICAgICAgICB0aGlzX2NodW5rID0gcmVjZWl2ZWQKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gdXJsb3Blbl93aXRoX3JldHJ5KHJlcXVlc3QuUmVxdWVzdCh1cmwsIGhlYWRlcnM9aGVhZGVycykpCiAgICAgICAgICAgIGlmIGJhcjoKICAgICAgICAgICAgICAgIGJhci51cGRhdGVfcmVjZWl2ZWQobGVuKGJ1ZmZlcikpCgogICAgYXNzZXJ0IHJlY2VpdmVkID09IG9zLnBhdGguZ2V0c2l6ZSh0ZW1wX2ZpbGVwYXRoKSwgJyVzID09ICVzID09ICVzJyAlIChyZWNlaXZlZCwgb3MucGF0aC5nZXRzaXplKHRlbXBfZmlsZXBhdGgpKQoKICAgIGlmIG9zLmFjY2VzcyhmaWxlcGF0aCwgb3MuV19PSyk6CiAgICAgICAgb3MucmVtb3ZlKGZpbGVwYXRoKSAgIyBvbiBXaW5kb3dzIHJlbmFtZSBjb3VsZCBmYWlsIGlmIGRlc3RpbmF0aW9uIGZpbGVwYXRoIGV4aXN0cwogICAgb3MucmVuYW1lKHRlbXBfZmlsZXBhdGgsIGZpbGVwYXRoKQoKCmNsYXNzIFNpbXBsZVByb2dyZXNzQmFyOgogICAgdGVybV9zaXplID0gdGVybS5nZXRfdGVybWluYWxfc2l6ZSgpWzFdCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRvdGFsX3NpemUsIHRvdGFsX3BpZWNlcz0xKToKICAgICAgICBzZWxmLmRpc3BsYXllZCA9IEZhbHNlCiAgICAgICAgc2VsZi50b3RhbF9zaXplID0gdG90YWxfc2l6ZQogICAgICAgIHNlbGYudG90YWxfcGllY2VzID0gdG90YWxfcGllY2VzCiAgICAgICAgc2VsZi5jdXJyZW50X3BpZWNlID0gMQogICAgICAgIHNlbGYucmVjZWl2ZWQgPSAwCiAgICAgICAgc2VsZi5zcGVlZCA9ICcnCiAgICAgICAgc2VsZi5sYXN0X3VwZGF0ZWQgPSB0aW1lLnRpbWUoKQoKICAgICAgICB0b3RhbF9waWVjZXNfbGVuID0gbGVuKHN0cih0b3RhbF9waWVjZXMpKQogICAgICAgICMgMzggaXMgdGhlIHNpemUgb2YgYWxsIHN0YXRpY2FsbHkga25vd24gc2l6ZSBpbiBzZWxmLmJhcgogICAgICAgIHRvdGFsX3N0ciA9ICclNXMnICUgcm91bmQoc2VsZi50b3RhbF9zaXplIC8gMTA0ODU3NiwgMSkKICAgICAgICB0b3RhbF9zdHJfd2lkdGggPSBtYXgobGVuKHRvdGFsX3N0ciksIDUpCiAgICAgICAgc2VsZi5iYXJfc2l6ZSA9IHNlbGYudGVybV9zaXplIC0gMjcgLSAyICogdG90YWxfcGllY2VzX2xlbiAtIDIgKiB0b3RhbF9zdHJfd2lkdGgKICAgICAgICBzZWxmLmJhciA9ICd7Oj40fSUlICh7Oj4lc30vJXNNQikg4pScezrilIA8JXN94pSkW3s6PiVzfS97Oj4lc31dIHt9JyAlICgKICAgICAgICAgICAgdG90YWxfc3RyX3dpZHRoLCB0b3RhbF9zdHIsIHNlbGYuYmFyX3NpemUsIHRvdGFsX3BpZWNlc19sZW4sIHRvdGFsX3BpZWNlc19sZW4pCgogICAgZGVmIHVwZGF0ZShzZWxmKToKICAgICAgICBzZWxmLmRpc3BsYXllZCA9IFRydWUKICAgICAgICBiYXJfc2l6ZSA9IHNlbGYuYmFyX3NpemUKICAgICAgICBwZXJjZW50ID0gcm91bmQoc2VsZi5yZWNlaXZlZCAqIDEwMCAvIHNlbGYudG90YWxfc2l6ZSwgMSkKICAgICAgICBpZiBwZXJjZW50ID49IDEwMDoKICAgICAgICAgICAgcGVyY2VudCA9IDEwMAogICAgICAgIGRvdHMgPSBiYXJfc2l6ZSAqIGludChwZXJjZW50KSAvLyAxMDAKICAgICAgICBwbHVzID0gaW50KHBlcmNlbnQpIC0gZG90cyAvLyBiYXJfc2l6ZSAqIDEwMAogICAgICAgIGlmIHBsdXMgPiAwLjg6CiAgICAgICAgICAgIHBsdXMgPSAn4paIJwogICAgICAgIGVsaWYgcGx1cyA+IDAuNDoKICAgICAgICAgICAgcGx1cyA9ICc+JwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBsdXMgPSAnJwogICAgICAgIGJhciA9ICfilognICogZG90cyArIHBsdXMKICAgICAgICBiYXIgPSBzZWxmLmJhci5mb3JtYXQocGVyY2VudCwgcm91bmQoc2VsZi5yZWNlaXZlZCAvIDEwNDg1NzYsIDEpLCBiYXIsIHNlbGYuY3VycmVudF9waWVjZSwgc2VsZi50b3RhbF9waWVjZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3BlZWQpCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHInICsgYmFyKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQoKICAgIGRlZiB1cGRhdGVfcmVjZWl2ZWQoc2VsZiwgbik6CiAgICAgICAgc2VsZi5yZWNlaXZlZCArPSBuCiAgICAgICAgdGltZV9kaWZmID0gdGltZS50aW1lKCkgLSBzZWxmLmxhc3RfdXBkYXRlZAogICAgICAgIGJ5dGVzX3BzID0gbiAvIHRpbWVfZGlmZiBpZiB0aW1lX2RpZmYgZWxzZSAwCiAgICAgICAgaWYgYnl0ZXNfcHMgPj0gMTAyNCAqKiAzOgogICAgICAgICAgICBzZWxmLnNwZWVkID0gJ3s6NC4wZn0gR0IvcycuZm9ybWF0KGJ5dGVzX3BzIC8gMTAyNCAqKiAzKQogICAgICAgIGVsaWYgYnl0ZXNfcHMgPj0gMTAyNCAqKiAyOgogICAgICAgICAgICBzZWxmLnNwZWVkID0gJ3s6NC4wZn0gTUIvcycuZm9ybWF0KGJ5dGVzX3BzIC8gMTAyNCAqKiAyKQogICAgICAgIGVsaWYgYnl0ZXNfcHMgPj0gMTAyNDoKICAgICAgICAgICAgc2VsZi5zcGVlZCA9ICd7OjQuMGZ9IGtCL3MnLmZvcm1hdChieXRlc19wcyAvIDEwMjQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5zcGVlZCA9ICd7OjQuMGZ9ICBCL3MnLmZvcm1hdChieXRlc19wcykKICAgICAgICBzZWxmLmxhc3RfdXBkYXRlZCA9IHRpbWUudGltZSgpCiAgICAgICAgc2VsZi51cGRhdGUoKQoKICAgIGRlZiB1cGRhdGVfcGllY2Uoc2VsZiwgbik6CiAgICAgICAgc2VsZi5jdXJyZW50X3BpZWNlID0gbgoKICAgIGRlZiBkb25lKHNlbGYpOgogICAgICAgIGlmIHNlbGYuZGlzcGxheWVkOgogICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgIHNlbGYuZGlzcGxheWVkID0gRmFsc2UKCgpjbGFzcyBQaWVjZXNQcm9ncmVzc0JhcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0b3RhbF9zaXplLCB0b3RhbF9waWVjZXM9MSk6CiAgICAgICAgc2VsZi5kaXNwbGF5ZWQgPSBGYWxzZQogICAgICAgIHNlbGYudG90YWxfc2l6ZSA9IHRvdGFsX3NpemUKICAgICAgICBzZWxmLnRvdGFsX3BpZWNlcyA9IHRvdGFsX3BpZWNlcwogICAgICAgIHNlbGYuY3VycmVudF9waWVjZSA9IDEKICAgICAgICBzZWxmLnJlY2VpdmVkID0gMAoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgc2VsZi5kaXNwbGF5ZWQgPSBUcnVlCiAgICAgICAgYmFyID0gJ3swOj41fSVbezE6PDQwfV0gezJ9L3szfScuZm9ybWF0KCcnLCAnPScgKiA0MCwgc2VsZi5jdXJyZW50X3BpZWNlLCBzZWxmLnRvdGFsX3BpZWNlcykKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdccicgKyBiYXIpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCgogICAgZGVmIHVwZGF0ZV9yZWNlaXZlZChzZWxmLCBuKToKICAgICAgICBzZWxmLnJlY2VpdmVkICs9IG4KICAgICAgICBzZWxmLnVwZGF0ZSgpCgogICAgZGVmIHVwZGF0ZV9waWVjZShzZWxmLCBuKToKICAgICAgICBzZWxmLmN1cnJlbnRfcGllY2UgPSBuCgogICAgZGVmIGRvbmUoc2VsZik6CiAgICAgICAgaWYgc2VsZi5kaXNwbGF5ZWQ6CiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgc2VsZi5kaXNwbGF5ZWQgPSBGYWxzZQoKCmNsYXNzIER1bW15UHJvZ3Jlc3NCYXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlX3JlY2VpdmVkKHNlbGYsIG4pOgogICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlX3BpZWNlKHNlbGYsIG4pOgogICAgICAgIHBhc3MKCiAgICBkZWYgZG9uZShzZWxmKToKICAgICAgICBwYXNzCgoKZGVmIGdldF9vdXRwdXRfZmlsZW5hbWUoc3BpbHRlZCwgdGl0bGUsIGV4dCwgb3V0cHV0X2RpciwgbWVyZ2UpOgogICAgIyBsYW1lIGhhY2sgZm9yIHRoZSAtLW91dHB1dC1maWxlbmFtZSBvcHRpb24KICAgIGdsb2JhbCBvdXRwdXRfZmlsZW5hbWUKICAgIGlmIG91dHB1dF9maWxlbmFtZTogcmV0dXJuIG91dHB1dF9maWxlbmFtZQoKICAgIG1lcmdlZF9leHQgPSBleHQKICAgIGlmIHNwaWx0ZWQgYW5kIG1lcmdlOgogICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGhhc19mZm1wZWdfaW5zdGFsbGVkCiAgICAgICAgaWYgZXh0IGluIFsnZmx2JywgJ2Y0diddOgogICAgICAgICAgICBpZiBoYXNfZmZtcGVnX2luc3RhbGxlZCgpOgogICAgICAgICAgICAgICAgbWVyZ2VkX2V4dCA9ICdtcDQnCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtZXJnZWRfZXh0ID0gJ2ZsdicKICAgICAgICBlbGlmIGV4dCA9PSAnbXA0JzoKICAgICAgICAgICAgbWVyZ2VkX2V4dCA9ICdtcDQnCiAgICAgICAgZWxpZiBleHQgPT0gJ3RzJzoKICAgICAgICAgICAgaWYgaGFzX2ZmbXBlZ19pbnN0YWxsZWQoKToKICAgICAgICAgICAgICAgIG1lcmdlZF9leHQgPSAnbWt2JwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWVyZ2VkX2V4dCA9ICd0cycKICAgIHJldHVybiAnJXMuJXMnICUgKHRpdGxlLCBtZXJnZWRfZXh0KQoKCmRlZiBkb3dubG9hZF91cmxzKHVybHMsIHRpdGxlLCBleHQsIHRvdGFsX3NpemUsIG91dHB1dF9kaXI9Jy4nLCByZWZlcj1Ob25lLCBtZXJnZT1UcnVlLCBmYWtlcj1GYWxzZSwgaGVhZGVycz17fSwKICAgICAgICAgICAgICAgICAgc2VnbWVudHM9MSwgKiprd2FyZ3MpOgogICAgYXNzZXJ0IHVybHMKICAgIGlmIGpzb25fb3V0cHV0OgogICAgICAgIGpzb25fb3V0cHV0Xy5kb3dubG9hZF91cmxzKHVybHM9dXJscywgdGl0bGU9dGl0bGUsIGV4dD1leHQsIHRvdGFsX3NpemU9dG90YWxfc2l6ZSwgcmVmZXI9cmVmZXIpCiAgICAgICAgcmV0dXJuCiAgICBpZiBkcnlfcnVuOgogICAgICAgIHByaW50KCdSZWFsIFVSTHM6XG4lcycgJSAnXG4nLmpvaW4odXJscykpCiAgICAgICAgcmV0dXJuCgogICAgaWYgcGxheWVyOgogICAgICAgIGxhdW5jaF9wbGF5ZXIocGxheWVyLCB1cmxzKQogICAgICAgIHJldHVybgoKICAgIGlmIG5vdCB0b3RhbF9zaXplOgogICAgICAgIHRyeToKICAgICAgICAgICAgdG90YWxfc2l6ZSA9IHVybHNfc2l6ZSh1cmxzLCBmYWtlcj1mYWtlciwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgaW1wb3J0IHRyYWNlYmFjawogICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKGZpbGU9c3lzLnN0ZG91dCkKICAgICAgICAgICAgcGFzcwoKICAgIHNlZ21lbnRzID0gbGVuKHVybHMpIGlmIGlzaW5zdGFuY2UodXJscywgbGlzdCkgZWxzZSBzZWdtZW50cyAgIyBpZiB1cmxzIGlzIGEgZ2VuZXJhdG9yCiAgICB0aXRsZSA9IHRyKGdldF9maWxlbmFtZSh0aXRsZSkpCiAgICBvdXRwdXRfZmlsZW5hbWUgPSBnZXRfb3V0cHV0X2ZpbGVuYW1lKHNlZ21lbnRzID4gMSwgdGl0bGUsIGV4dCwgb3V0cHV0X2RpciwgbWVyZ2UpCiAgICBvdXRwdXRfZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2Rpciwgb3V0cHV0X2ZpbGVuYW1lKQoKICAgIGlmIHRvdGFsX3NpemU6CiAgICAgICAgaWYgbm90IGZvcmNlIGFuZCBvcy5wYXRoLmV4aXN0cyhvdXRwdXRfZmlsZXBhdGgpIGFuZCBvcy5wYXRoLmdldHNpemUob3V0cHV0X2ZpbGVwYXRoKSA+PSB0b3RhbF9zaXplICogMC45OgogICAgICAgICAgICBwcmludCgnU2tpcHBpbmcgJXM6IGZpbGUgYWxyZWFkeSBleGlzdHMnICUgb3V0cHV0X2ZpbGVwYXRoKQogICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGJhciA9IFNpbXBsZVByb2dyZXNzQmFyKHRvdGFsX3NpemUsIHNlZ21lbnRzKQogICAgZWxzZToKICAgICAgICBiYXIgPSBQaWVjZXNQcm9ncmVzc0Jhcih0b3RhbF9zaXplLCBzZWdtZW50cykKCiAgICBpZiBzZWdtZW50cyA9PSAxOgogICAgICAgIHVybCA9IHVybHNbMF0gaWYgaXNpbnN0YW5jZSh1cmxzLCBsaXN0KSBlbHNlIHVybHMuX19uZXh0X18oKQogICAgICAgIHByaW50KCdEb3dubG9hZGluZyAlcyAuLi4nICUgdHIob3V0cHV0X2ZpbGVuYW1lKSkKICAgICAgICBiYXIudXBkYXRlKCkKICAgICAgICB1cmxfc2F2ZSh1cmwsIG91dHB1dF9maWxlcGF0aCwgYmFyLCByZWZlcj1yZWZlciwgZmFrZXI9ZmFrZXIsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBiYXIuZG9uZSgpCiAgICBlbHNlOgogICAgICAgIHBhcnRzID0gW10KICAgICAgICBwcmludCgnRG93bmxvYWRpbmcgJXMuJXMgLi4uJyAlICh0cih0aXRsZSksIGV4dCkpCiAgICAgICAgYmFyLnVwZGF0ZSgpCiAgICAgICAgZm9yIGksIHVybCBpbiBlbnVtZXJhdGUodXJscyk6CiAgICAgICAgICAgIGZpbGVuYW1lID0gJyVzWyUwMmRdLiVzJyAlICh0aXRsZSwgaSwgZXh0KQogICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihvdXRwdXRfZGlyLCBmaWxlbmFtZSkKICAgICAgICAgICAgcGFydHMuYXBwZW5kKGZpbGVwYXRoKQogICAgICAgICAgICAjIHByaW50ICdEb3dubG9hZGluZyAlcyBbJXMvJXNdLi4uJyAlICh0cihmaWxlbmFtZSksIGkgKyAxLCBsZW4odXJscykpCiAgICAgICAgICAgIGJhci51cGRhdGVfcGllY2UoaSArIDEpCiAgICAgICAgICAgIHVybF9zYXZlKHVybCwgZmlsZXBhdGgsIGJhciwgcmVmZXI9cmVmZXIsIGlzX3BhcnQ9VHJ1ZSwgZmFrZXI9ZmFrZXIsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBiYXIuZG9uZSgpCgogICAgICAgIGlmIG5vdCBtZXJnZToKICAgICAgICAgICAgcHJpbnQoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgJ2F2JyBpbiBrd2FyZ3MgYW5kIGt3YXJnc1snYXYnXToKICAgICAgICAgICAgZnJvbSAucHJvY2Vzc29yLmZmbXBlZyBpbXBvcnQgaGFzX2ZmbXBlZ19pbnN0YWxsZWQKICAgICAgICAgICAgaWYgaGFzX2ZmbXBlZ19pbnN0YWxsZWQoKToKICAgICAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGZmbXBlZ19jb25jYXRfYXYKICAgICAgICAgICAgICAgIHJldCA9IGZmbXBlZ19jb25jYXRfYXYocGFydHMsIG91dHB1dF9maWxlcGF0aCwgZXh0KQogICAgICAgICAgICAgICAgcHJpbnQoJ01lcmdlZCBpbnRvICVzJyAlIG91dHB1dF9maWxlbmFtZSkKICAgICAgICAgICAgICAgIGlmIHJldCA9PSAwOgogICAgICAgICAgICAgICAgICAgIGZvciBwYXJ0IGluIHBhcnRzOiBvcy5yZW1vdmUocGFydCkKCiAgICAgICAgZWxpZiBleHQgaW4gWydmbHYnLCAnZjR2J106CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGhhc19mZm1wZWdfaW5zdGFsbGVkCiAgICAgICAgICAgICAgICBpZiBoYXNfZmZtcGVnX2luc3RhbGxlZCgpOgogICAgICAgICAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGZmbXBlZ19jb25jYXRfZmx2X3RvX21wNAogICAgICAgICAgICAgICAgICAgIGZmbXBlZ19jb25jYXRfZmx2X3RvX21wNChwYXJ0cywgb3V0cHV0X2ZpbGVwYXRoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3Iuam9pbl9mbHYgaW1wb3J0IGNvbmNhdF9mbHYKICAgICAgICAgICAgICAgICAgICBjb25jYXRfZmx2KHBhcnRzLCBvdXRwdXRfZmlsZXBhdGgpCiAgICAgICAgICAgICAgICBwcmludCgnTWVyZ2VkIGludG8gJXMnICUgb3V0cHV0X2ZpbGVuYW1lKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZm9yIHBhcnQgaW4gcGFydHM6CiAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKHBhcnQpCgogICAgICAgIGVsaWYgZXh0ID09ICdtcDQnOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBoYXNfZmZtcGVnX2luc3RhbGxlZAogICAgICAgICAgICAgICAgaWYgaGFzX2ZmbXBlZ19pbnN0YWxsZWQoKToKICAgICAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBmZm1wZWdfY29uY2F0X21wNF90b19tcDQKICAgICAgICAgICAgICAgICAgICBmZm1wZWdfY29uY2F0X21wNF90b19tcDQocGFydHMsIG91dHB1dF9maWxlcGF0aCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZnJvbSAucHJvY2Vzc29yLmpvaW5fbXA0IGltcG9ydCBjb25jYXRfbXA0CiAgICAgICAgICAgICAgICAgICAgY29uY2F0X21wNChwYXJ0cywgb3V0cHV0X2ZpbGVwYXRoKQogICAgICAgICAgICAgICAgcHJpbnQoJ01lcmdlZCBpbnRvICVzJyAlIG91dHB1dF9maWxlbmFtZSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZvciBwYXJ0IGluIHBhcnRzOgogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShwYXJ0KQoKICAgICAgICBlbGlmIGV4dCA9PSAidHMiOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBoYXNfZmZtcGVnX2luc3RhbGxlZAogICAgICAgICAgICAgICAgaWYgaGFzX2ZmbXBlZ19pbnN0YWxsZWQoKToKICAgICAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBmZm1wZWdfY29uY2F0X3RzX3RvX21rdgogICAgICAgICAgICAgICAgICAgIGZmbXBlZ19jb25jYXRfdHNfdG9fbWt2KHBhcnRzLCBvdXRwdXRfZmlsZXBhdGgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5qb2luX3RzIGltcG9ydCBjb25jYXRfdHMKICAgICAgICAgICAgICAgICAgICBjb25jYXRfdHMocGFydHMsIG91dHB1dF9maWxlcGF0aCkKICAgICAgICAgICAgICAgIHByaW50KCdNZXJnZWQgaW50byAlcycgJSBvdXRwdXRfZmlsZW5hbWUpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUocGFydCkKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIkNhbid0IG1lcmdlICVzIGZpbGVzIiAlIGV4dCkKCiAgICBwcmludCgpCgoKZGVmIGRvd25sb2FkX3VybHNfY2h1bmtlZCh1cmxzLCB0aXRsZSwgZXh0LCB0b3RhbF9zaXplLCBvdXRwdXRfZGlyPScuJywgcmVmZXI9Tm9uZSwgbWVyZ2U9VHJ1ZSwgZmFrZXI9RmFsc2UsIGhlYWRlcnM9e30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgKiprd2FyZ3MpOgogICAgYXNzZXJ0IHVybHMKICAgIGlmIGRyeV9ydW46CiAgICAgICAgcHJpbnQoJ1JlYWwgVVJMczpcbiVzXG4nICUgdXJscykKICAgICAgICByZXR1cm4KCiAgICBpZiBwbGF5ZXI6CiAgICAgICAgbGF1bmNoX3BsYXllcihwbGF5ZXIsIHVybHMpCiAgICAgICAgcmV0dXJuCgogICAgdGl0bGUgPSB0cihnZXRfZmlsZW5hbWUodGl0bGUpKQoKICAgIGZpbGVuYW1lID0gJyVzLiVzJyAlICh0aXRsZSwgZXh0KQogICAgZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2RpciwgZmlsZW5hbWUpCiAgICBpZiB0b3RhbF9zaXplOgogICAgICAgIGlmIG5vdCBmb3JjZSBhbmQgb3MucGF0aC5leGlzdHMoZmlsZXBhdGhbOi0zXSArICcubWt2Jyk6CiAgICAgICAgICAgIHByaW50KCdTa2lwcGluZyAlczogZmlsZSBhbHJlYWR5IGV4aXN0cycgJSBmaWxlcGF0aFs6LTNdICsgJy5ta3YnKQogICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGJhciA9IFNpbXBsZVByb2dyZXNzQmFyKHRvdGFsX3NpemUsIGxlbih1cmxzKSkKICAgIGVsc2U6CiAgICAgICAgYmFyID0gUGllY2VzUHJvZ3Jlc3NCYXIodG90YWxfc2l6ZSwgbGVuKHVybHMpKQoKICAgIGlmIGxlbih1cmxzKSA9PSAxOgogICAgICAgIHBhcnRzID0gW10KICAgICAgICB1cmwgPSB1cmxzWzBdCiAgICAgICAgcHJpbnQoJ0Rvd25sb2FkaW5nICVzIC4uLicgJSB0cihmaWxlbmFtZSkpCiAgICAgICAgZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2RpciwgZmlsZW5hbWUpCiAgICAgICAgcGFydHMuYXBwZW5kKGZpbGVwYXRoKQogICAgICAgIHVybF9zYXZlX2NodW5rZWQodXJsLCBmaWxlcGF0aCwgYmFyLCByZWZlcj1yZWZlciwgZmFrZXI9ZmFrZXIsIGhlYWRlcnM9aGVhZGVycywgKiprd2FyZ3MpCiAgICAgICAgYmFyLmRvbmUoKQoKICAgICAgICBpZiBub3QgbWVyZ2U6CiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZXh0ID09ICd0cyc6CiAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGhhc19mZm1wZWdfaW5zdGFsbGVkCiAgICAgICAgICAgIGlmIGhhc19mZm1wZWdfaW5zdGFsbGVkKCk6CiAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBmZm1wZWdfY29udmVydF90c190b19ta3YKICAgICAgICAgICAgICAgIGlmIGZmbXBlZ19jb252ZXJ0X3RzX3RvX21rdihwYXJ0cywgb3MucGF0aC5qb2luKG91dHB1dF9kaXIsIHRpdGxlICsgJy5ta3YnKSk6CiAgICAgICAgICAgICAgICAgICAgZm9yIHBhcnQgaW4gcGFydHM6CiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShwYXJ0KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUob3MucGF0aC5qb2luKG91dHB1dF9kaXIsIHRpdGxlICsgJy5ta3YnKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCdObyBmZm1wZWcgaXMgZm91bmQuIENvbnZlcnNpb24gYWJvcnRlZC4nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJDYW4ndCBjb252ZXJ0ICVzIGZpbGVzIiAlIGV4dCkKICAgIGVsc2U6CiAgICAgICAgcGFydHMgPSBbXQogICAgICAgIHByaW50KCdEb3dubG9hZGluZyAlcy4lcyAuLi4nICUgKHRyKHRpdGxlKSwgZXh0KSkKICAgICAgICBmb3IgaSwgdXJsIGluIGVudW1lcmF0ZSh1cmxzKToKICAgICAgICAgICAgZmlsZW5hbWUgPSAnJXNbJTAyZF0uJXMnICUgKHRpdGxlLCBpLCBleHQpCiAgICAgICAgICAgIGZpbGVwYXRoID0gb3MucGF0aC5qb2luKG91dHB1dF9kaXIsIGZpbGVuYW1lKQogICAgICAgICAgICBwYXJ0cy5hcHBlbmQoZmlsZXBhdGgpCiAgICAgICAgICAgICMgcHJpbnQgJ0Rvd25sb2FkaW5nICVzIFslcy8lc10uLi4nICUgKHRyKGZpbGVuYW1lKSwgaSArIDEsIGxlbih1cmxzKSkKICAgICAgICAgICAgYmFyLnVwZGF0ZV9waWVjZShpICsgMSkKICAgICAgICAgICAgdXJsX3NhdmVfY2h1bmtlZCh1cmwsIGZpbGVwYXRoLCBiYXIsIHJlZmVyPXJlZmVyLCBpc19wYXJ0PVRydWUsIGZha2VyPWZha2VyLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgYmFyLmRvbmUoKQoKICAgICAgICBpZiBub3QgbWVyZ2U6CiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgZXh0ID09ICd0cyc6CiAgICAgICAgICAgIGZyb20gLnByb2Nlc3Nvci5mZm1wZWcgaW1wb3J0IGhhc19mZm1wZWdfaW5zdGFsbGVkCiAgICAgICAgICAgIGlmIGhhc19mZm1wZWdfaW5zdGFsbGVkKCk6CiAgICAgICAgICAgICAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBmZm1wZWdfY29uY2F0X3RzX3RvX21rdgogICAgICAgICAgICAgICAgaWYgZmZtcGVnX2NvbmNhdF90c190b19ta3YocGFydHMsIG9zLnBhdGguam9pbihvdXRwdXRfZGlyLCB0aXRsZSArICcubWt2JykpOgogICAgICAgICAgICAgICAgICAgIGZvciBwYXJ0IGluIHBhcnRzOgogICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUocGFydCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgb3MucmVtb3ZlKG9zLnBhdGguam9pbihvdXRwdXRfZGlyLCB0aXRsZSArICcubWt2JykpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgnTm8gZmZtcGVnIGlzIGZvdW5kLiBNZXJnaW5nIGFib3J0ZWQuJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiQ2FuJ3QgbWVyZ2UgJXMgZmlsZXMiICUgZXh0KQoKICAgIHByaW50KCkKCgpkZWYgZG93bmxvYWRfcnRtcF91cmwodXJsLCB0aXRsZSwgZXh0LCBwYXJhbXM9e30sIHRvdGFsX3NpemU9MCwgb3V0cHV0X2Rpcj0nLicsIHJlZmVyPU5vbmUsIG1lcmdlPVRydWUsIGZha2VyPUZhbHNlKToKICAgIGFzc2VydCB1cmwKICAgIGlmIGRyeV9ydW46CiAgICAgICAgcHJpbnQoJ1JlYWwgVVJMOlxuJXNcbicgJSBbdXJsXSkKICAgICAgICBpZiBwYXJhbXMuZ2V0KCIteSIsIEZhbHNlKTogICMgTm9uZSBvciB1bnNldCAtPkZhbHNlCiAgICAgICAgICAgIHByaW50KCdSZWFsIFBsYXlwYXRoOlxuJXNcbicgJSBbcGFyYW1zLmdldCgiLXkiKV0pCiAgICAgICAgcmV0dXJuCgogICAgaWYgcGxheWVyOgogICAgICAgIGZyb20gLnByb2Nlc3Nvci5ydG1wZHVtcCBpbXBvcnQgcGxheV9ydG1wZHVtcF9zdHJlYW0KICAgICAgICBwbGF5X3J0bXBkdW1wX3N0cmVhbShwbGF5ZXIsIHVybCwgcGFyYW1zKQogICAgICAgIHJldHVybgoKICAgIGZyb20gLnByb2Nlc3Nvci5ydG1wZHVtcCBpbXBvcnQgaGFzX3J0bXBkdW1wX2luc3RhbGxlZCwgZG93bmxvYWRfcnRtcGR1bXBfc3RyZWFtCiAgICBhc3NlcnQgaGFzX3J0bXBkdW1wX2luc3RhbGxlZCgpLCAiUlRNUER1bXAgbm90IGluc3RhbGxlZC4iCiAgICBkb3dubG9hZF9ydG1wZHVtcF9zdHJlYW0odXJsLCB0aXRsZSwgZXh0LCBwYXJhbXMsIG91dHB1dF9kaXIpCgoKZGVmIGRvd25sb2FkX3VybF9mZm1wZWcodXJsLCB0aXRsZSwgZXh0LCBwYXJhbXM9e30sIHRvdGFsX3NpemU9MCwgb3V0cHV0X2Rpcj0nLicsIHJlZmVyPU5vbmUsIG1lcmdlPVRydWUsIGZha2VyPUZhbHNlKToKICAgIGFzc2VydCB1cmwKICAgIGlmIGRyeV9ydW46CiAgICAgICAgcHJpbnQoJ1JlYWwgVVJMOlxuJXNcbicgJSBbdXJsXSkKICAgICAgICBpZiBwYXJhbXMuZ2V0KCIteSIsIEZhbHNlKTogICMgTm9uZSBvciB1bnNldCAtPkZhbHNlCiAgICAgICAgICAgIHByaW50KCdSZWFsIFBsYXlwYXRoOlxuJXNcbicgJSBbcGFyYW1zLmdldCgiLXkiKV0pCiAgICAgICAgcmV0dXJuCgogICAgaWYgcGxheWVyOgogICAgICAgIGxhdW5jaF9wbGF5ZXIocGxheWVyLCBbdXJsXSkKICAgICAgICByZXR1cm4KCiAgICBmcm9tIC5wcm9jZXNzb3IuZmZtcGVnIGltcG9ydCBoYXNfZmZtcGVnX2luc3RhbGxlZCwgZmZtcGVnX2Rvd25sb2FkX3N0cmVhbQogICAgYXNzZXJ0IGhhc19mZm1wZWdfaW5zdGFsbGVkKCksICJGRm1wZWcgbm90IGluc3RhbGxlZC4iCgogICAgZ2xvYmFsIG91dHB1dF9maWxlbmFtZQogICAgaWYgb3V0cHV0X2ZpbGVuYW1lOgogICAgICAgIGRvdFBvcyA9IG91dHB1dF9maWxlbmFtZS5yZmluZCgiLiIpCiAgICAgICAgdGl0bGUgPSBvdXRwdXRfZmlsZW5hbWVbOmRvdFBvc10KICAgICAgICBleHQgPSBvdXRwdXRfZmlsZW5hbWVbZG90UG9zICsgMTpdCgogICAgdGl0bGUgPSB0cihnZXRfZmlsZW5hbWUodGl0bGUpKQoKICAgIGZmbXBlZ19kb3dubG9hZF9zdHJlYW0odXJsLCB0aXRsZSwgZXh0LCBwYXJhbXMsIG91dHB1dF9kaXIpCgoKZGVmIHBsYXlsaXN0X25vdF9zdXBwb3J0ZWQobmFtZSk6CiAgICBkZWYgZigqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoJ1BsYXlsaXN0IGlzIG5vdCBzdXBwb3J0ZWQgZm9yICcgKyBuYW1lKQoKICAgIHJldHVybiBmCgoKZGVmIHByaW50X2luZm8oc2l0ZV9pbmZvLCB0aXRsZSwgdHlwZSwgc2l6ZSk6CiAgICBpZiBqc29uX291dHB1dDoKICAgICAgICBqc29uX291dHB1dF8ucHJpbnRfaW5mbyhzaXRlX2luZm89c2l0ZV9pbmZvLCB0aXRsZT10aXRsZSwgdHlwZT10eXBlLCBzaXplPXNpemUpCiAgICAgICAgcmV0dXJuCiAgICBpZiB0eXBlOgogICAgICAgIHR5cGUgPSB0eXBlLmxvd2VyKCkKICAgIGlmIHR5cGUgaW4gWyczZ3AnXToKICAgICAgICB0eXBlID0gJ3ZpZGVvLzNncHAnCiAgICBlbGlmIHR5cGUgaW4gWydhc2YnLCAnd212J106CiAgICAgICAgdHlwZSA9ICd2aWRlby94LW1zLWFzZicKICAgIGVsaWYgdHlwZSBpbiBbJ2ZsdicsICdmNHYnXToKICAgICAgICB0eXBlID0gJ3ZpZGVvL3gtZmx2JwogICAgZWxpZiB0eXBlIGluIFsnbWt2J106CiAgICAgICAgdHlwZSA9ICd2aWRlby94LW1hdHJvc2thJwogICAgZWxpZiB0eXBlIGluIFsnbXAzJ106CiAgICAgICAgdHlwZSA9ICdhdWRpby9tcGVnJwogICAgZWxpZiB0eXBlIGluIFsnbXA0J106CiAgICAgICAgdHlwZSA9ICd2aWRlby9tcDQnCiAgICBlbGlmIHR5cGUgaW4gWydtb3YnXToKICAgICAgICB0eXBlID0gJ3ZpZGVvL3F1aWNrdGltZScKICAgIGVsaWYgdHlwZSBpbiBbJ3RzJ106CiAgICAgICAgdHlwZSA9ICd2aWRlby9NUDJUJwogICAgZWxpZiB0eXBlIGluIFsnd2VibSddOgogICAgICAgIHR5cGUgPSAndmlkZW8vd2VibScKCiAgICBlbGlmIHR5cGUgaW4gWydqcGcnXToKICAgICAgICB0eXBlID0gJ2ltYWdlL2pwZWcnCiAgICBlbGlmIHR5cGUgaW4gWydwbmcnXToKICAgICAgICB0eXBlID0gJ2ltYWdlL3BuZycKICAgIGVsaWYgdHlwZSBpbiBbJ2dpZiddOgogICAgICAgIHR5cGUgPSAnaW1hZ2UvZ2lmJwoKICAgIGlmIHR5cGUgaW4gWyd2aWRlby8zZ3BwJ106CiAgICAgICAgdHlwZV9pbmZvID0gIjNHUFAgbXVsdGltZWRpYSBmaWxlICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsndmlkZW8veC1mbHYnLCAndmlkZW8vZjR2J106CiAgICAgICAgdHlwZV9pbmZvID0gIkZsYXNoIHZpZGVvICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsndmlkZW8vbXA0JywgJ3ZpZGVvL3gtbTR2J106CiAgICAgICAgdHlwZV9pbmZvID0gIk1QRUctNCB2aWRlbyAoJXMpIiAlIHR5cGUKICAgIGVsaWYgdHlwZSBpbiBbJ3ZpZGVvL01QMlQnXToKICAgICAgICB0eXBlX2luZm8gPSAiTVBFRy0yIHRyYW5zcG9ydCBzdHJlYW0gKCVzKSIgJSB0eXBlCiAgICBlbGlmIHR5cGUgaW4gWyd2aWRlby93ZWJtJ106CiAgICAgICAgdHlwZV9pbmZvID0gIldlYk0gdmlkZW8gKCVzKSIgJSB0eXBlCiAgICAjIGVsaWYgdHlwZSBpbiBbJ3ZpZGVvL29nZyddOgogICAgIyAgICB0eXBlX2luZm8gPSAiT2dnIHZpZGVvICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsndmlkZW8vcXVpY2t0aW1lJ106CiAgICAgICAgdHlwZV9pbmZvID0gIlF1aWNrVGltZSB2aWRlbyAoJXMpIiAlIHR5cGUKICAgIGVsaWYgdHlwZSBpbiBbJ3ZpZGVvL3gtbWF0cm9za2EnXToKICAgICAgICB0eXBlX2luZm8gPSAiTWF0cm9za2EgdmlkZW8gKCVzKSIgJSB0eXBlCiAgICAjIGVsaWYgdHlwZSBpbiBbJ3ZpZGVvL3gtbXMtd212J106CiAgICAjICAgIHR5cGVfaW5mbyA9ICJXaW5kb3dzIE1lZGlhIHZpZGVvICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsndmlkZW8veC1tcy1hc2YnXToKICAgICAgICB0eXBlX2luZm8gPSAiQWR2YW5jZWQgU3lzdGVtcyBGb3JtYXQgKCVzKSIgJSB0eXBlCiAgICAjIGVsaWYgdHlwZSBpbiBbJ3ZpZGVvL21wZWcnXToKICAgICMgICAgdHlwZV9pbmZvID0gIk1QRUcgdmlkZW8gKCVzKSIgJSB0eXBlCiAgICBlbGlmIHR5cGUgaW4gWydhdWRpby9tcDQnXToKICAgICAgICB0eXBlX2luZm8gPSAiTVBFRy00IGF1ZGlvICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsnYXVkaW8vbXBlZyddOgogICAgICAgIHR5cGVfaW5mbyA9ICJNUDMgKCVzKSIgJSB0eXBlCgogICAgZWxpZiB0eXBlIGluIFsnaW1hZ2UvanBlZyddOgogICAgICAgIHR5cGVfaW5mbyA9ICJKUEVHIEltYWdlICglcykiICUgdHlwZQogICAgZWxpZiB0eXBlIGluIFsnaW1hZ2UvcG5nJ106CiAgICAgICAgdHlwZV9pbmZvID0gIlBvcnRhYmxlIE5ldHdvcmsgR3JhcGhpY3MgKCVzKSIgJSB0eXBlCiAgICBlbGlmIHR5cGUgaW4gWydpbWFnZS9naWYnXToKICAgICAgICB0eXBlX2luZm8gPSAiR3JhcGhpY3MgSW50ZXJjaGFuZ2UgRm9ybWF0ICglcykiICUgdHlwZQoKICAgIGVsc2U6CiAgICAgICAgdHlwZV9pbmZvID0gIlVua25vd24gdHlwZSAoJXMpIiAlIHR5cGUKCiAgICBtYXliZV9wcmludCgiU2l0ZTogICAgICAiLCBzaXRlX2luZm8pCiAgICBtYXliZV9wcmludCgiVGl0bGU6ICAgICAiLCB1bmVzY2FwZV9odG1sKHRyKHRpdGxlKSkpCiAgICBwcmludCgiVHlwZTogICAgICAiLCB0eXBlX2luZm8pCiAgICBwcmludCgiU2l6ZTogICAgICAiLCByb3VuZChzaXplIC8gMTA0ODU3NiwgMiksICJNaUIgKCIgKyBzdHIoc2l6ZSkgKyAiIEJ5dGVzKSIpCiAgICBwcmludCgpCgoKZGVmIG1pbWVfdG9fY29udGFpbmVyKG1pbWUpOgogICAgbWFwcGluZyA9IHsKICAgICAgICAndmlkZW8vM2dwcCc6ICczZ3AnLAogICAgICAgICd2aWRlby9tcDQnOiAnbXA0JywKICAgICAgICAndmlkZW8vd2VibSc6ICd3ZWJtJywKICAgICAgICAndmlkZW8veC1mbHYnOiAnZmx2JywKICAgIH0KICAgIGlmIG1pbWUgaW4gbWFwcGluZzoKICAgICAgICByZXR1cm4gbWFwcGluZ1ttaW1lXQogICAgZWxzZToKICAgICAgICByZXR1cm4gbWltZS5zcGxpdCgnLycpWzFdCgoKZGVmIHBhcnNlX2hvc3QoaG9zdCk6CiAgICAiIiJQYXJzZXMgaG9zdCBuYW1lIGFuZCBwb3J0IG51bWJlciBmcm9tIGEgc3RyaW5nLgogICAgIiIiCiAgICBpZiByZS5tYXRjaChyJ14oXGQrKSQnLCBob3N0KSBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gKCIwLjAuMC4wIiwgaW50KGhvc3QpKQogICAgaWYgcmUubWF0Y2gocideKFx3Kyk6Ly8nLCBob3N0KSBpcyBOb25lOgogICAgICAgIGhvc3QgPSAiLy8iICsgaG9zdAogICAgbyA9IHBhcnNlLnVybHBhcnNlKGhvc3QpCiAgICBob3N0bmFtZSA9IG8uaG9zdG5hbWUgb3IgIjAuMC4wLjAiCiAgICBwb3J0ID0gby5wb3J0IG9yIDAKICAgIHJldHVybiAoaG9zdG5hbWUsIHBvcnQpCgoKZGVmIHNldF9wcm94eShwcm94eSk6CiAgICBwcm94eV9oYW5kbGVyID0gcmVxdWVzdC5Qcm94eUhhbmRsZXIoewogICAgICAgICdodHRwJzogJyVzOiVzJyAlIHByb3h5LAogICAgICAgICdodHRwcyc6ICclczolcycgJSBwcm94eSwKICAgIH0pCiAgICBvcGVuZXIgPSByZXF1ZXN0LmJ1aWxkX29wZW5lcihwcm94eV9oYW5kbGVyKQogICAgcmVxdWVzdC5pbnN0YWxsX29wZW5lcihvcGVuZXIpCgoKZGVmIHVuc2V0X3Byb3h5KCk6CiAgICBwcm94eV9oYW5kbGVyID0gcmVxdWVzdC5Qcm94eUhhbmRsZXIoe30pCiAgICBvcGVuZXIgPSByZXF1ZXN0LmJ1aWxkX29wZW5lcihwcm94eV9oYW5kbGVyKQogICAgcmVxdWVzdC5pbnN0YWxsX29wZW5lcihvcGVuZXIpCgoKIyBERVBSRUNBVEVEIGluIGZhdm9yIG9mIHNldF9wcm94eSgpIGFuZCB1bnNldF9wcm94eSgpCmRlZiBzZXRfaHR0cF9wcm94eShwcm94eSk6CiAgICBpZiBwcm94eSA9PSBOb25lOiAgIyBVc2Ugc3lzdGVtIGRlZmF1bHQgc2V0dGluZwogICAgICAgIHByb3h5X3N1cHBvcnQgPSByZXF1ZXN0LlByb3h5SGFuZGxlcigpCiAgICBlbGlmIHByb3h5ID09ICcnOiAgIyBEb24ndCB1c2UgYW55IHByb3h5CiAgICAgICAgcHJveHlfc3VwcG9ydCA9IHJlcXVlc3QuUHJveHlIYW5kbGVyKHt9KQogICAgZWxzZTogICMgVXNlIHByb3h5CiAgICAgICAgcHJveHlfc3VwcG9ydCA9IHJlcXVlc3QuUHJveHlIYW5kbGVyKHsnaHR0cCc6ICclcycgJSBwcm94eSwgJ2h0dHBzJzogJyVzJyAlIHByb3h5fSkKICAgIG9wZW5lciA9IHJlcXVlc3QuYnVpbGRfb3BlbmVyKHByb3h5X3N1cHBvcnQpCiAgICByZXF1ZXN0Lmluc3RhbGxfb3BlbmVyKG9wZW5lcikKCgpkZWYgcHJpbnRfbW9yZV9jb21wYXRpYmxlKCphcmdzLCAqKmt3YXJncyk6CiAgICBpbXBvcnQgYnVpbHRpbnMgYXMgX19idWlsdGluX18KICAgICIiIk92ZXJsb2FkIGRlZmF1bHQgcHJpbnQgZnVuY3Rpb24gYXMgcHkgKDwzLjMpIGRvZXMgbm90IHN1cHBvcnQgJ2ZsdXNoJyBrZXl3b3JkLgogICAgQWx0aG91Z2ggdGhlIGZ1bmN0aW9uIG5hbWUgY2FuIGJlIHNhbWUgYXMgcHJpbnQgdG8gZ2V0IGl0c2VsZiBvdmVybG9hZGVkIGF1dG9tYXRpY2FsbHksCiAgICBJJ2QgcmF0aGVyIGxlYXZlIGl0IHdpdGggYSBkaWZmZXJlbnQgbmFtZSBhbmQgb25seSBvdmVybG9hZCBpdCB3aGVuIGltcG9ydGluZyB0byBtYWtlIGxlc3MgY29uZnVzaW9uLiAiIiIKICAgICMgbm90aGluZyBoYXBwZW5zIG9uIHB5My4zIGFuZCBsYXRlcgogICAgaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDMpOgogICAgICAgIHJldHVybiBfX2J1aWx0aW5fXy5wcmludCgqYXJncywgKiprd2FyZ3MpCgogICAgIyBpbiBsb3dlciBweXZlciAoZS5nLiAzLjIueCksIHJlbW92ZSAnZmx1c2gnIGtleXdvcmQgYW5kIGZsdXNoIGl0IGFzIHJlcXVlc3RlZAogICAgZG9GbHVzaCA9IGt3YXJncy5wb3AoJ2ZsdXNoJywgRmFsc2UpCiAgICByZXQgPSBfX2J1aWx0aW5fXy5wcmludCgqYXJncywgKiprd2FyZ3MpCiAgICBpZiBkb0ZsdXNoOgogICAgICAgIGt3YXJncy5nZXQoJ2ZpbGUnLCBzeXMuc3Rkb3V0KS5mbHVzaCgpCiAgICByZXR1cm4gcmV0CgoKZGVmIGRvd25sb2FkX21haW4oZG93bmxvYWQsIGRvd25sb2FkX3BsYXlsaXN0LCB1cmxzLCBwbGF5bGlzdCwgKiprd2FyZ3MpOgogICAgZm9yIHVybCBpbiB1cmxzOgogICAgICAgIGlmIHVybC5zdGFydHN3aXRoKCdodHRwczovLycpOgogICAgICAgICAgICB1cmwgPSB1cmxbODpdCiAgICAgICAgaWYgbm90IHVybC5zdGFydHN3aXRoKCdodHRwOi8vJyk6CiAgICAgICAgICAgIHVybCA9ICdodHRwOi8vJyArIHVybAoKICAgICAgICBpZiBwbGF5bGlzdDoKICAgICAgICAgICAgZG93bmxvYWRfcGxheWxpc3QodXJsLCAqKmt3YXJncykKICAgICAgICBlbHNlOgogICAgICAgICAgICBkb3dubG9hZCh1cmwsICoqa3dhcmdzKQoKCmRlZiBzY3JpcHRfbWFpbihzY3JpcHRfbmFtZSwgZG93bmxvYWQsIGRvd25sb2FkX3BsYXlsaXN0LCAqKmt3YXJncyk6CiAgICBkZWYgdmVyc2lvbigpOgogICAgICAgIGxvZy5pKCd2ZXJzaW9uICVzLCBhIHRpbnkgZG93bmxvYWRlciB0aGF0IHNjcmFwZXMgdGhlIHdlYi4nCiAgICAgICAgICAgICAgJSBnZXRfdmVyc2lvbihrd2FyZ3NbJ3JlcG9fcGF0aCddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAncmVwb19wYXRoJyBpbiBrd2FyZ3MgZWxzZSBfX3ZlcnNpb25fXykpCgogICAgbG9nZ2luZy5iYXNpY0NvbmZpZyhmb3JtYXQ9J1slKGxldmVsbmFtZSlzXSAlKG1lc3NhZ2UpcycpCgogICAgaGVscCA9ICdVc2FnZTogJXMgW09QVElPTl0uLi4gW1VSTF0uLi5cblxuJyAlIHNjcmlwdF9uYW1lCiAgICBoZWxwICs9ICcnJ1N0YXJ0dXAgb3B0aW9uczoKICAgIC1WIHwgLS12ZXJzaW9uICAgICAgICAgICAgICAgICAgICAgIFByaW50IHZlcnNpb24gYW5kIGV4aXQuCiAgICAtaCB8IC0taGVscCAgICAgICAgICAgICAgICAgICAgICAgICBQcmludCBoZWxwIGFuZCBleGl0LgogICAgXG4nJycKICAgIGhlbHAgKz0gJycnRHJ5LXJ1biBvcHRpb25zOiAobm8gYWN0dWFsIGRvd25sb2FkaW5nKQogICAgLWkgfCAtLWluZm8gICAgICAgICAgICAgICAgICAgICAgICAgUHJpbnQgZXh0cmFjdGVkIGluZm9ybWF0aW9uLgogICAgLXUgfCAtLXVybCAgICAgICAgICAgICAgICAgICAgICAgICAgUHJpbnQgZXh0cmFjdGVkIGluZm9ybWF0aW9uIHdpdGggVVJMcy4KICAgICAgICAgLS1qc29uICAgICAgICAgICAgICAgICAgICAgICAgIFByaW50IGV4dHJhY3RlZCBVUkxzIGluIEpTT04gZm9ybWF0LgogICAgXG4nJycKICAgIGhlbHAgKz0gJycnRG93bmxvYWQgb3B0aW9uczoKICAgIC1uIHwgLS1uby1tZXJnZSAgICAgICAgICAgICAgICAgICAgIERvIG5vdCBtZXJnZSB2aWRlbyBwYXJ0cy4KICAgICAgICAgLS1uby1jYXB0aW9uICAgICAgICAgICAgICAgICAgIERvIG5vdCBkb3dubG9hZCBjYXB0aW9ucy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdWJ0aXRsZXMsIGx5cmljcywgZGFubWFrdSwgLi4uKQogICAgLWYgfCAtLWZvcmNlICAgICAgICAgICAgICAgICAgICAgICAgRm9yY2Ugb3ZlcndyaXRpbmcgZXhpc3RlZCBmaWxlcy4KICAgIC1GIHwgLS1mb3JtYXQgPFNUUkVBTV9JRD4gICAgICAgICAgIFNldCB2aWRlbyBmb3JtYXQgdG8gU1RSRUFNX0lELgogICAgLU8gfCAtLW91dHB1dC1maWxlbmFtZSA8RklMRT4gICAgICAgU2V0IG91dHB1dCBmaWxlbmFtZS4KICAgIC1vIHwgLS1vdXRwdXQtZGlyIDxQQVRIPiAgICAgICAgICAgIFNldCBvdXRwdXQgZGlyZWN0b3J5LgogICAgLXAgfCAtLXBsYXllciA8UExBWUVSIFtPUFRJT05TXT4gICAgU3RyZWFtIGV4dHJhY3RlZCBVUkwgdG8gYSBQTEFZRVIuCiAgICAtYyB8IC0tY29va2llcyA8Q09PS0lFU19GSUxFPiAgICAgICBMb2FkIGNvb2tpZXMudHh0IG9yIGNvb2tpZXMuc3FsaXRlLgogICAgLXggfCAtLWh0dHAtcHJveHkgPEhPU1Q6UE9SVD4gICAgICAgVXNlIGFuIEhUVFAgcHJveHkgZm9yIGRvd25sb2FkaW5nLgogICAgLXkgfCAtLWV4dHJhY3Rvci1wcm94eSA8SE9TVDpQT1JUPiAgVXNlIGFuIEhUVFAgcHJveHkgZm9yIGV4dHJhY3Rpbmcgb25seS4KICAgICAgICAgLS1uby1wcm94eSAgICAgICAgICAgICAgICAgICAgIE5ldmVyIHVzZSBhIHByb3h5LgogICAgLXMgfCAtLXNvY2tzLXByb3h5IDxIT1NUOlBPUlQ+ICAgICAgVXNlIGFuIFNPQ0tTNSBwcm94eSBmb3IgZG93bmxvYWRpbmcuCiAgICAtdCB8IC0tdGltZW91dCA8U0VDT05EUz4gICAgICAgICAgICBTZXQgc29ja2V0IHRpbWVvdXQuCiAgICAtZCB8IC0tZGVidWcgICAgICAgICAgICAgICAgICAgICAgICBTaG93IHRyYWNlYmFjayBhbmQgb3RoZXIgZGVidWcgaW5mby4KICAgICcnJwoKICAgIHNob3J0X29wdHMgPSAnVmhmaXVjOm5kRjpPOm86cDp4Onk6czp0OicKICAgIG9wdHMgPSBbJ3ZlcnNpb24nLCAnaGVscCcsICdmb3JjZScsICdpbmZvJywgJ3VybCcsICdjb29raWVzJywgJ25vLWNhcHRpb24nLCAnbm8tbWVyZ2UnLCAnbm8tcHJveHknLCAnZGVidWcnLCAnanNvbicsCiAgICAgICAgICAgICdmb3JtYXQ9JywgJ3N0cmVhbT0nLCAnaXRhZz0nLCAnb3V0cHV0LWZpbGVuYW1lPScsICdvdXRwdXQtZGlyPScsICdwbGF5ZXI9JywgJ2h0dHAtcHJveHk9JywgJ3NvY2tzLXByb3h5PScsCiAgICAgICAgICAgICdleHRyYWN0b3ItcHJveHk9JywgJ2xhbmc9JywgJ3RpbWVvdXQ9J10KICAgIGlmIGRvd25sb2FkX3BsYXlsaXN0OgogICAgICAgIHNob3J0X29wdHMgPSAnbCcgKyBzaG9ydF9vcHRzCiAgICAgICAgb3B0cyA9IFsncGxheWxpc3QnXSArIG9wdHMKCiAgICB0cnk6CiAgICAgICAgb3B0cywgYXJncyA9IGdldG9wdC5nZXRvcHQoc3lzLmFyZ3ZbMTpdLCBzaG9ydF9vcHRzLCBvcHRzKQogICAgZXhjZXB0IGdldG9wdC5HZXRvcHRFcnJvciBhcyBlcnI6CiAgICAgICAgbG9nLmUoZXJyKQogICAgICAgIGxvZy5lKCJ0cnkgJ3lvdS1nZXQgLS1oZWxwJyBmb3IgbW9yZSBvcHRpb25zIikKICAgICAgICBzeXMuZXhpdCgyKQoKICAgIGdsb2JhbCBmb3JjZQogICAgZ2xvYmFsIGRyeV9ydW4KICAgIGdsb2JhbCBqc29uX291dHB1dAogICAgZ2xvYmFsIHBsYXllcgogICAgZ2xvYmFsIGV4dHJhY3Rvcl9wcm94eQogICAgZ2xvYmFsIGNvb2tpZXMKICAgIGdsb2JhbCBvdXRwdXRfZmlsZW5hbWUKCiAgICBpbmZvX29ubHkgPSBGYWxzZQogICAgcGxheWxpc3QgPSBGYWxzZQogICAgY2FwdGlvbiA9IFRydWUKICAgIG1lcmdlID0gVHJ1ZQogICAgc3RyZWFtX2lkID0gTm9uZQogICAgbGFuZyA9IE5vbmUKICAgIG91dHB1dF9kaXIgPSAnLicKICAgIHByb3h5ID0gTm9uZQogICAgc29ja3NfcHJveHkgPSBOb25lCiAgICBleHRyYWN0b3JfcHJveHkgPSBOb25lCiAgICB0cmFjZWJhY2sgPSBGYWxzZQogICAgdGltZW91dCA9IDYwMAogICAgZm9yIG8sIGEgaW4gb3B0czoKICAgICAgICBpZiBvIGluICgnLVYnLCAnLS12ZXJzaW9uJyk6CiAgICAgICAgICAgIHZlcnNpb24oKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZWxpZiBvIGluICgnLWgnLCAnLS1oZWxwJyk6CiAgICAgICAgICAgIHZlcnNpb24oKQogICAgICAgICAgICBwcmludChoZWxwKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICAgICAgZWxpZiBvIGluICgnLWYnLCAnLS1mb3JjZScpOgogICAgICAgICAgICBmb3JjZSA9IFRydWUKICAgICAgICBlbGlmIG8gaW4gKCctaScsICctLWluZm8nKToKICAgICAgICAgICAgaW5mb19vbmx5ID0gVHJ1ZQogICAgICAgIGVsaWYgbyBpbiAoJy11JywgJy0tdXJsJyk6CiAgICAgICAgICAgIGRyeV9ydW4gPSBUcnVlCiAgICAgICAgZWxpZiBvIGluICgnLS1qc29uJywpOgogICAgICAgICAgICBqc29uX291dHB1dCA9IFRydWUKICAgICAgICAgICAgIyB0byBmaXggZXh0cmFjdG9ycyBub3QgdXNlIFZpZGVvRXh0cmFjdG9yCiAgICAgICAgICAgIGRyeV9ydW4gPSBUcnVlCiAgICAgICAgICAgIGluZm9fb25seSA9IEZhbHNlCiAgICAgICAgZWxpZiBvIGluICgnLWMnLCAnLS1jb29raWVzJyk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGNvb2tpZXMgPSBjb29raWVqYXIuTW96aWxsYUNvb2tpZUphcihhKQogICAgICAgICAgICAgICAgY29va2llcy5sb2FkKCkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgaW1wb3J0IHNxbGl0ZTMKICAgICAgICAgICAgICAgIGNvb2tpZXMgPSBjb29raWVqYXIuTW96aWxsYUNvb2tpZUphcigpCiAgICAgICAgICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QoYSkKICAgICAgICAgICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGN1ci5leGVjdXRlKCJTRUxFQ1QgaG9zdCwgcGF0aCwgaXNTZWN1cmUsIGV4cGlyeSwgbmFtZSwgdmFsdWUgRlJPTSBtb3pfY29va2llcyIpCiAgICAgICAgICAgICAgICAgICAgZm9yIGl0ZW0gaW4gY3VyLmZldGNoYWxsKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBjb29raWVqYXIuQ29va2llKDAsIGl0ZW1bNF0sIGl0ZW1bNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vbmUsIEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzBdLnN0YXJ0c3dpdGgoJy4nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVswXS5zdGFydHN3aXRoKCcuJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bMV0sIEZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzNdLCBpdGVtWzNdID09ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb25lLCBOb25lLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgY29va2llcy5zZXRfY29va2llKGMpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgIyBUT0RPOiBDaHJvbWl1bSBDb29raWVzCiAgICAgICAgICAgICAgICAjIFNFTEVDVCBob3N0X2tleSwgcGF0aCwgc2VjdXJlLCBleHBpcmVzX3V0YywgbmFtZSwgZW5jcnlwdGVkX3ZhbHVlIEZST00gY29va2llcwogICAgICAgICAgICAgICAgIyBodHRwOi8vbjhoZW5yaWUuY29tLzIwMTMvMTEvdXNlLWNocm9tZXMtY29va2llcy1mb3ItZWFzaWVyLWRvd25sb2FkaW5nLXdpdGgtcHl0aG9uLXJlcXVlc3RzLwoKICAgICAgICBlbGlmIG8gaW4gKCctbCcsICctLXBsYXlsaXN0Jyk6CiAgICAgICAgICAgIHBsYXlsaXN0ID0gVHJ1ZQogICAgICAgIGVsaWYgbyBpbiAoJy0tbm8tY2FwdGlvbicsKToKICAgICAgICAgICAgY2FwdGlvbiA9IEZhbHNlCiAgICAgICAgZWxpZiBvIGluICgnLW4nLCAnLS1uby1tZXJnZScpOgogICAgICAgICAgICBtZXJnZSA9IEZhbHNlCiAgICAgICAgZWxpZiBvIGluICgnLS1uby1wcm94eScsKToKICAgICAgICAgICAgcHJveHkgPSAnJwogICAgICAgIGVsaWYgbyBpbiAoJy1kJywgJy0tZGVidWcnKToKICAgICAgICAgICAgdHJhY2ViYWNrID0gVHJ1ZQogICAgICAgICAgICAjIFNldCBsZXZlbCBvZiByb290IGxvZ2dlciB0byBERUJVRwogICAgICAgICAgICBsb2dnaW5nLmdldExvZ2dlcigpLnNldExldmVsKGxvZ2dpbmcuREVCVUcpCiAgICAgICAgZWxpZiBvIGluICgnLUYnLCAnLS1mb3JtYXQnLCAnLS1zdHJlYW0nLCAnLS1pdGFnJyk6CiAgICAgICAgICAgIHN0cmVhbV9pZCA9IGEKICAgICAgICBlbGlmIG8gaW4gKCctTycsICctLW91dHB1dC1maWxlbmFtZScpOgogICAgICAgICAgICBvdXRwdXRfZmlsZW5hbWUgPSBhCiAgICAgICAgZWxpZiBvIGluICgnLW8nLCAnLS1vdXRwdXQtZGlyJyk6CiAgICAgICAgICAgIG91dHB1dF9kaXIgPSBhCiAgICAgICAgZWxpZiBvIGluICgnLXAnLCAnLS1wbGF5ZXInKToKICAgICAgICAgICAgcGxheWVyID0gYQogICAgICAgICAgICBjYXB0aW9uID0gRmFsc2UKICAgICAgICBlbGlmIG8gaW4gKCcteCcsICctLWh0dHAtcHJveHknKToKICAgICAgICAgICAgcHJveHkgPSBhCiAgICAgICAgZWxpZiBvIGluICgnLXMnLCAnLS1zb2Nrcy1wcm94eScpOgogICAgICAgICAgICBzb2Nrc19wcm94eSA9IGEKICAgICAgICBlbGlmIG8gaW4gKCcteScsICctLWV4dHJhY3Rvci1wcm94eScpOgogICAgICAgICAgICBleHRyYWN0b3JfcHJveHkgPSBhCiAgICAgICAgZWxpZiBvIGluICgnLS1sYW5nJywpOgogICAgICAgICAgICBsYW5nID0gYQogICAgICAgIGVsaWYgbyBpbiAoJy10JywgJy0tdGltZW91dCcpOgogICAgICAgICAgICB0aW1lb3V0ID0gaW50KGEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9nLmUoInRyeSAneW91LWdldCAtLWhlbHAnIGZvciBtb3JlIG9wdGlvbnMiKQogICAgICAgICAgICBzeXMuZXhpdCgyKQogICAgaWYgbm90IGFyZ3M6CiAgICAgICAgcHJpbnQoaGVscCkKICAgICAgICBzeXMuZXhpdCgpCgogICAgaWYgKHNvY2tzX3Byb3h5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCBzb2NrZXQKICAgICAgICAgICAgaW1wb3J0IHNvY2tzCiAgICAgICAgICAgIHNvY2tzX3Byb3h5X2FkZHJzID0gc29ja3NfcHJveHkuc3BsaXQoJzonKQogICAgICAgICAgICBzb2Nrcy5zZXRfZGVmYXVsdF9wcm94eShzb2Nrcy5TT0NLUzUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tzX3Byb3h5X2FkZHJzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQoc29ja3NfcHJveHlfYWRkcnNbMV0pKQogICAgICAgICAgICBzb2NrZXQuc29ja2V0ID0gc29ja3Muc29ja3NvY2tldAoKICAgICAgICAgICAgZGVmIGdldGFkZHJpbmZvKCphcmdzKToKICAgICAgICAgICAgICAgIHJldHVybiBbKHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0sIDYsICcnLCAoYXJnc1swXSwgYXJnc1sxXSkpXQoKICAgICAgICAgICAgc29ja2V0LmdldGFkZHJpbmZvID0gZ2V0YWRkcmluZm8KICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIGxvZy53KCdFcnJvciBpbXBvcnRpbmcgUHlTb2NrcyBsaWJyYXJ5LCBzb2NrcyBwcm94eSBpZ25vcmVkLicKICAgICAgICAgICAgICAgICAgJ0luIG9yZGVyIHRvIHVzZSB1c2Ugc29ja3MgcHJveHksIHBsZWFzZSBpbnN0YWxsIFB5U29ja3MuJykKICAgIGVsc2U6CiAgICAgICAgaW1wb3J0IHNvY2tldAogICAgICAgIHNldF9odHRwX3Byb3h5KHByb3h5KQoKICAgIHNvY2tldC5zZXRkZWZhdWx0dGltZW91dCh0aW1lb3V0KQoKICAgIHRyeToKICAgICAgICBpZiBzdHJlYW1faWQ6CiAgICAgICAgICAgIGlmIG5vdCBleHRyYWN0b3JfcHJveHk6CiAgICAgICAgICAgICAgICBkb3dubG9hZF9tYWluKGRvd25sb2FkLCBkb3dubG9hZF9wbGF5bGlzdCwgYXJncywgcGxheWxpc3QsIHN0cmVhbV9pZD1zdHJlYW1faWQsIG91dHB1dF9kaXI9b3V0cHV0X2RpciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2U9bWVyZ2UsIGluZm9fb25seT1pbmZvX29ubHksIGpzb25fb3V0cHV0PWpzb25fb3V0cHV0LCBjYXB0aW9uPWNhcHRpb24pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkb3dubG9hZF9tYWluKGRvd25sb2FkLCBkb3dubG9hZF9wbGF5bGlzdCwgYXJncywgcGxheWxpc3QsIHN0cmVhbV9pZD1zdHJlYW1faWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3Rvcl9wcm94eT1leHRyYWN0b3JfcHJveHksIG91dHB1dF9kaXI9b3V0cHV0X2RpciwgbWVyZ2U9bWVyZ2UsIGluZm9fb25seT1pbmZvX29ubHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb25fb3V0cHV0PWpzb25fb3V0cHV0LCBjYXB0aW9uPWNhcHRpb24pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgbm90IGV4dHJhY3Rvcl9wcm94eToKICAgICAgICAgICAgICAgIGRvd25sb2FkX21haW4oZG93bmxvYWQsIGRvd25sb2FkX3BsYXlsaXN0LCBhcmdzLCBwbGF5bGlzdCwgb3V0cHV0X2Rpcj1vdXRwdXRfZGlyLCBtZXJnZT1tZXJnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb19vbmx5PWluZm9fb25seSwganNvbl9vdXRwdXQ9anNvbl9vdXRwdXQsIGNhcHRpb249Y2FwdGlvbikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRvd25sb2FkX21haW4oZG93bmxvYWQsIGRvd25sb2FkX3BsYXlsaXN0LCBhcmdzLCBwbGF5bGlzdCwgZXh0cmFjdG9yX3Byb3h5PWV4dHJhY3Rvcl9wcm94eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X2Rpcj1vdXRwdXRfZGlyLCBtZXJnZT1tZXJnZSwgaW5mb19vbmx5PWluZm9fb25seSwganNvbl9vdXRwdXQ9anNvbl9vdXRwdXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb249Y2FwdGlvbikKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICBpZiB0cmFjZWJhY2s6CiAgICAgICAgICAgIHJhaXNlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgbG9nLmUoJ1tlcnJvcl0gb29wcywgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IFVuaWNvZGUuJykKICAgICAgICBsb2cuZSgncGxlYXNlIHNldCBpdCB0byBhIFVURi04LWF3YXJlIGxvY2FsZSBmaXJzdCwnKQogICAgICAgIGxvZy5lKCdzbyBhcyB0byBzYXZlIHRoZSB2aWRlbyAod2l0aCBzb21lIFVuaWNvZGUgY2hhcmFjdGVycykgY29ycmVjdGx5LicpCiAgICAgICAgbG9nLmUoJ3lvdSBjYW4gZG8gaXQgbGlrZSB0aGlzOicpCiAgICAgICAgbG9nLmUoJyAgICAoV2luZG93cykgICAgJSBjaGNwIDY1MDAxICcpCiAgICAgICAgbG9nLmUoJyAgICAoTGludXgpICAgICAgJCBMQ19DVFlQRT1lbl9VUy5VVEYtOCcpCiAgICAgICAgc3lzLmV4aXQoMSkKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgaWYgbm90IHRyYWNlYmFjazoKICAgICAgICAgICAgbG9nLmUoJ1tlcnJvcl0gb29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmcuJykKICAgICAgICAgICAgbG9nLmUoJ2RvblwndCBwYW5pYywgY1wnZXN0IGxhIHZpZS4gcGxlYXNlIHRyeSB0aGUgZm9sbG93aW5nIHN0ZXBzOicpCiAgICAgICAgICAgIGxvZy5lKCcgICgxKSBSdWxlIG91dCBhbnkgbmV0d29yayBwcm9ibGVtLicpCiAgICAgICAgICAgIGxvZy5lKCcgICgyKSBNYWtlIHN1cmUgeW91LWdldCBpcyB1cC10by1kYXRlLicpCiAgICAgICAgICAgIGxvZy5lKCcgICgzKSBDaGVjayBpZiB0aGUgaXNzdWUgaXMgYWxyZWFkeSBrbm93biwgb24nKQogICAgICAgICAgICBsb2cuZSgnICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vc29pbW9ydC95b3UtZ2V0L3dpa2kvS25vd24tQnVncycpCiAgICAgICAgICAgIGxvZy5lKCcgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9zb2ltb3J0L3lvdS1nZXQvaXNzdWVzJykKICAgICAgICAgICAgbG9nLmUoJyAgKDQpIFJ1biB0aGUgY29tbWFuZCB3aXRoIFwnLS1kZWJ1Z1wnIG9wdGlvbiwnKQogICAgICAgICAgICBsb2cuZSgnICAgICAgYW5kIHJlcG9ydCB0aGlzIGlzc3VlIHdpdGggdGhlIGZ1bGwgb3V0cHV0LicpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdmVyc2lvbigpCiAgICAgICAgICAgIGxvZy5pKGFyZ3MpCiAgICAgICAgICAgIHJhaXNlCiAgICAgICAgc3lzLmV4aXQoMSkKCgpkZWYgZ29vZ2xlX3NlYXJjaCh1cmwpOgogICAga2V5d29yZHMgPSByMShyJ2h0dHBzPzovLyguKiknLCB1cmwpCiAgICB1cmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/dGJtPXZpZCZxPSVzJyAlIHBhcnNlLnF1b3RlKGtleXdvcmRzKQogICAgcGFnZSA9IGdldF9jb250ZW50KHVybCwgaGVhZGVycz1mYWtlX2hlYWRlcnMpCiAgICB2aWRlb3MgPSByZS5maW5kYWxsKHInPGEgaHJlZj0iKGh0dHBzPzovL1teIl0rKSIgb25tb3VzZWRvd249IlteIl0rIj4oW148XSspPCcsIHBhZ2UpCiAgICB2ZHVycyA9IHJlLmZpbmRhbGwocic8c3BhbiBjbGFzcz0idmR1ciBfZHdjIj4oW148XSspPCcsIHBhZ2UpCiAgICBkdXJzID0gW3IxKHInKFxkKzpcZCspJywgdW5lc2NhcGVfaHRtbChkdXIpKSBmb3IgZHVyIGluIHZkdXJzXQogICAgcHJpbnQoIkdvb2dsZSBWaWRlb3Mgc2VhcmNoOiIpCiAgICBmb3IgdiBpbiB6aXAodmlkZW9zLCBkdXJzKToKICAgICAgICBwcmludCgiLSB2aWRlbzogICVzIFslc10iICUgKHVuZXNjYXBlX2h0bWwodlswXVsxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2WzFdIGlmIHZbMV0gZWxzZSAnPycpKQogICAgICAgIHByaW50KCIjIHlvdS1nZXQgJXMiICUgbG9nLnNwcmludCh2WzBdWzBdLCBsb2cuVU5ERVJMSU5FKSkKICAgICAgICBwcmludCgpCiAgICBwcmludCgiQmVzdCBtYXRjaGVkIHJlc3VsdDoiKQogICAgcmV0dXJuICh2aWRlb3NbMF1bMF0pCgoKZGVmIHVybF90b19tb2R1bGUodXJsKToKICAgIHRyeToKICAgICAgICB2aWRlb19ob3N0ID0gcjEocidodHRwcz86Ly8oW14vXSspLycsIHVybCkKICAgICAgICB2aWRlb191cmwgPSByMShyJ2h0dHBzPzovL1teL10rKC4qKScsIHVybCkKICAgICAgICBhc3NlcnQgdmlkZW9faG9zdCBhbmQgdmlkZW9fdXJsCiAgICBleGNlcHQ6CiAgICAgICAgdXJsID0gZ29vZ2xlX3NlYXJjaCh1cmwpCiAgICAgICAgdmlkZW9faG9zdCA9IHIxKHInaHR0cHM/Oi8vKFteL10rKS8nLCB1cmwpCiAgICAgICAgdmlkZW9fdXJsID0gcjEocidodHRwcz86Ly9bXi9dKyguKiknLCB1cmwpCgogICAgaWYgdmlkZW9faG9zdC5lbmRzd2l0aCgnLmNvbS5jbicpOgogICAgICAgIHZpZGVvX2hvc3QgPSB2aWRlb19ob3N0WzotM10KICAgIGRvbWFpbiA9IHIxKHInKFwuW14uXStcLlteLl0rKSQnLCB2aWRlb19ob3N0KSBvciB2aWRlb19ob3N0CiAgICBhc3NlcnQgZG9tYWluLCAndW5zdXBwb3J0ZWQgdXJsOiAnICsgdXJsCgogICAgayA9IHIxKHInKFteLl0rKScsIGRvbWFpbikKICAgIGlmIGsgaW4gU0lURVM6CiAgICAgICAgcmV0dXJuIGltcG9ydF9tb2R1bGUoJy4nLmpvaW4oWyd5b3VfZ2V0JywgJ2V4dHJhY3RvcnMnLCBTSVRFU1trXV0pKSwgdXJsCiAgICBlbHNlOgogICAgICAgIGltcG9ydCBodHRwLmNsaWVudAogICAgICAgIGNvbm4gPSBodHRwLmNsaWVudC5IVFRQQ29ubmVjdGlvbih2aWRlb19ob3N0KQogICAgICAgIGNvbm4ucmVxdWVzdCgiSEVBRCIsIHZpZGVvX3VybCwgaGVhZGVycz1mYWtlX2hlYWRlcnMpCiAgICAgICAgcmVzID0gY29ubi5nZXRyZXNwb25zZSgpCiAgICAgICAgbG9jYXRpb24gPSByZXMuZ2V0aGVhZGVyKCdsb2NhdGlvbicpCiAgICAgICAgaWYgbG9jYXRpb24gYW5kIGxvY2F0aW9uICE9IHVybCBhbmQgbm90IGxvY2F0aW9uLnN0YXJ0c3dpdGgoJy8nKToKICAgICAgICAgICAgcmV0dXJuIHVybF90b19tb2R1bGUobG9jYXRpb24pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGltcG9ydF9tb2R1bGUoJ3lvdV9nZXQuZXh0cmFjdG9ycy51bml2ZXJzYWwnKSwgdXJsCgoKZGVmIGFueV9kb3dubG9hZCh1cmwsICoqa3dhcmdzKToKICAgIG0sIHVybCA9IHVybF90b19tb2R1bGUodXJsKQogICAgbS5kb3dubG9hZCh1cmwsICoqa3dhcmdzKQoKCmRlZiBhbnlfZG93bmxvYWRfcGxheWxpc3QodXJsLCAqKmt3YXJncyk6CiAgICBtLCB1cmwgPSB1cmxfdG9fbW9kdWxlKHVybCkKICAgIG0uZG93bmxvYWRfcGxheWxpc3QodXJsLCAqKmt3YXJncykKCgpkZWYgbWFpbigqKmt3YXJncyk6CiAgICBzY3JpcHRfbWFpbigneW91LWdldCcsIGFueV9kb3dubG9hZCwgYW55X2Rvd25sb2FkX3BsYXlsaXN0LCAqKmt3YXJncykK</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgIHJldHVybiBzdHIob3Muc3lzdGVtKCd5b3UtZ2V0IC0tanNvbiAtLWRlYnVnICVzJyAlIHVybCkpCg==</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgIHNpdGUgPSBhbnlfZG93bmxvYWQodXJsKQogICAgaWYgc2l0ZSBpcyBOb25lOgogICAgICAgIHJldHVybiAnZmFpbCcsIDUwMAo=</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgIHByaW50KHNlbGYuc3RyZWFtc1tzdHJlYW1faWRdKQo=</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICBzZWdtZW50cyA9IHNlbGYuc3RyZWFtc1tzdHJlYW1faWRdWydzZWdtZW50cyddIGlmICdzZWdtZW50cycgaW4gc2VsZi5zdHJlYW1zW3N0cmVhbV9pZF0gZWxzZSAxCg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgICAnc2VnbWVudHMnOiBzZWdtZW50cywK</text>
      </register>
      <register name="8" type="4">
        <text encoding="base64">ICAgIHNlbGYuanNvbltzdHJlYW1faWQgPSBzdHJlYW1faWQKICAgIHNlbGYuanNvbi51cmxzID0gdXJscwogICAgc2VsZi5qc29uLmV4dCA9IGV4dAogICAgc2VsZi5qc29uLnRvdGFsX3NpemUgPSB0b3RhbF9zaXplCiAgICBzZWxmLmpzb24uc2VnbWVudHMgPSBzZWdtZW50cw==</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgICAgICAgaW1wb3J0IHRyYWNlYmFjawogICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKGZpbGU9c3lzLnN0ZG91dCkK</text>
      </register>
      <register name=":" type="4">
        <text>q</text>
      </register>
    </registers>
    <search>
      <last-search>help</last-search>
      <last-offset />
      <last-pattern>help</last-pattern>
      <last-replace>~</last-replace>
      <last-substitute encoding="base64">XDx1cmxzXD4=</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry>info-only</entry>
        <entry>--info</entry>
        <entry>url</entry>
        <entry>danmaku</entry>
        <entry>getinfo</entry>
        <entry encoding="base64">XDx1cmxzXD4=</entry>
        <entry>fid</entry>
        <entry>sd</entry>
        <entry>dry</entry>
        <entry>track</entry>
        <entry encoding="base64">XDx0cmFjZWJhY2tcPg==</entry>
        <entry>json_output</entry>
        <entry>segm</entry>
        <entry>segmen</entry>
        <entry encoding="base64">XDxzZWdtZW50c1w+</entry>
        <entry>video_profile</entry>
        <entry>video-profile</entry>
        <entry>debug</entry>
        <entry>json</entry>
        <entry>help</entry>
      </history-search>
      <history-cmd>
        <entry>qa!</entry>
        <entry>vs</entry>
        <entry>qa1</entry>
        <entry>qa</entry>
        <entry>q</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>